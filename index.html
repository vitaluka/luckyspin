--- START OF FILE index.html ---
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LuckySpin Grand Luxury | The Definitive Edition</title>
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <style>
        /* 
           ================================================================
           1. –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –¢–ï–ú–´ (–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª—è)
           ================================================================
        */
        :root {
            --p: #ff00ff; /* –ù–µ–æ–Ω–æ–≤—ã–π —Ä–æ–∑–æ–≤—ã–π */
            --c: #00f2ff; /* –ù–µ–æ–Ω–æ–≤—ã–π –≥–æ–ª—É–±–æ–π */
            --g: #ffcc00; /* –ó–æ–ª–æ—Ç–æ */
            --b: #050508; /* –ì–ª—É–±–æ–∫–∏–π —Ñ–æ–Ω */
            --surface: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --grad: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --shadow: 0 0 20px rgba(255, 0, 255, 0.3);
            --glass: rgba(255, 255, 255, 0.03);
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è */
        body.theme-emerald { --p: #10b981; --c: #34d399; --grad: linear-gradient(135deg, #064e3b, #065f46); }
        body.theme-ruby { --p: #e11d48; --c: #fb7185; --grad: linear-gradient(135deg, #4c0519, #881337); }
        body.theme-gold { --p: #ffcc00; --c: #ffffff; --grad: linear-gradient(135deg, #434343, #000000); }

        /* 
           ================================================================
           2. –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò (–û–±–Ω—É–ª–µ–Ω–∏–µ –∏ –º–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
           ================================================================
        */
        * { 
            box-sizing: border-box; 
            margin: 0; padding: 0; 
            font-family: 'Montserrat', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            -webkit-user-select: none; /* –ó–∞–ø—Ä–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è APK */
            user-select: none;
        }
        
        body {
            background: var(--b);
            background-image: var(--grad);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            background-attachment: fixed;
            overscroll-behavior-y: contain; /* –ó–∞–ø—Ä–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–≤–∞–π–ø–æ–º –≤–Ω–∏–∑ */
        }

        canvas#particle-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }

        /* 
           ================================================================
           3. –®–ê–ü–ö–ê (Header)
           ================================================================
        */
        header {
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(20px);
            padding: 20px 5%;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--p);
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: 28px; font-weight: 900; letter-spacing: 2px;
            background: linear-gradient(to right, #fff, var(--g));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .balance-pill {
            background: var(--surface);
            border: 1px solid var(--g);
            padding: 10px 25px;
            border-radius: 100px;
            display: flex; align-items: center; gap: 15px;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.2);
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #balance-val { font-weight: 900; color: var(--g); font-size: 24px; }

        /* –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä */
        .music-ctrl {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--surface); border: 1px solid var(--border);
            padding: 10px; border-radius: 50%; width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 1001; backdrop-filter: blur(10px);
        }

        /* 
           ================================================================
           4. –ì–ï–†–û–ô –ò –í–ò–ó–£–ê–õ–¨–ù–´–ï –ë–õ–û–ö–ò
           ================================================================
        */
        .hero {
            display: grid; grid-template-columns: 1.1fr 0.9fr;
            gap: 50px; padding: 80px 0; align-items: center;
        }

        .hero-info h1 {
            font-size: 64px; font-weight: 900; line-height: 1.1;
            margin-bottom: 25px; text-transform: uppercase;
        }
        .hero-info span { color: var(--p); text-shadow: 0 0 20px var(--p); }

        .daily-section {
            background: var(--surface); border: 1px solid var(--border);
            padding: 50px; border-radius: 50px; text-align: center;
            backdrop-filter: blur(15px); position: relative;
        }

        .wheel-outer {
            width: 320px; height: 320px; margin: 0 auto 30px;
            border: 10px solid var(--g); border-radius: 50%;
            position: relative; overflow: hidden;
            background: conic-gradient(
                #111 0deg 45deg, var(--p) 45deg 90deg, 
                #222 90deg 135deg, var(--c) 135deg 180deg,
                #111 180deg 225deg, var(--p) 225deg 270deg,
                #222 270deg 315deg, var(--c) 315deg 360deg
            );
            transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1);
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
        .wheel-pointer {
            position: absolute; top: -10px; left: 50%;
            transform: translateX(-50%); z-index: 10;
            width: 0; height: 0; border-left: 20px solid transparent;
            border-right: 20px solid transparent; border-top: 35px solid var(--g);
        }

        /* 
           ================================================================
           5. –ö–ù–û–ü–ö–ò (UI Elements)
           ================================================================
        */
        .btn-glam {
            background: linear-gradient(45deg, var(--p), var(--c));
            color: white; border: none; padding: 20px 50px;
            border-radius: 100px; font-weight: 900; font-size: 16px;
            cursor: pointer; text-transform: uppercase; letter-spacing: 2px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; overflow: hidden;
        }
        .btn-glam:hover:not(:disabled) { transform: translateY(-5px) scale(1.05); box-shadow: 0 0 30px var(--p); }
        .btn-glam:disabled { background: #333; cursor: not-allowed; opacity: 0.5; transform: scale(0.98); }

        /* 
           ================================================================
           6. –°–ï–¢–ö–ê –ò–ì–† (Game Selection)
           ================================================================
        */
        .grid-title {
            margin: 60px 0 30px; font-size: 32px; font-weight: 900;
            display: flex; align-items: center; gap: 20px; text-transform: uppercase;
        }
        .grid-title::after { content: ''; height: 2px; flex: 1; background: var(--border); }

        .games-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px; margin-bottom: 100px;
        }

        .game-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 40px; padding: 50px 30px; text-align: center;
            transition: 0.4s cubic-bezier(0.075, 0.82, 0.165, 1); cursor: pointer; position: relative; overflow: hidden;
        }
        .game-card:hover { transform: translateY(-15px); border-color: var(--p); background: rgba(255,255,255,0.08); }
        .game-card svg {
            width: 80px; height: 80px; margin-bottom: 30px;
            stroke: var(--c); fill: none; stroke-width: 1.5;
            filter: drop-shadow(0 0 15px var(--c));
        }
        .game-card h3 { font-size: 26px; font-weight: 900; margin-bottom: 15px; }
        .game-card p { opacity: 0.5; font-size: 15px; line-height: 1.6; }

        /* –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ */
        .referral-box {
            background: var(--surface); border: 1px solid var(--g);
            padding: 30px; border-radius: 30px; margin-top: 40px;
            text-align: center; backdrop-filter: blur(10px);
        }
        .ref-input {
            background: rgba(0,0,0,0.5); border: 1px solid var(--border);
            padding: 10px 20px; border-radius: 10px; color: white;
            text-align: center; font-size: 18px; margin: 15px 0; width: 250px;
            max-width: 100%; outline: none;
        }

        /* 
           ================================================================
           7. –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –ò –í–ò–î–ï–û (Overlay System)
           ================================================================
        */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 2000;
            backdrop-filter: blur(25px); justify-content: center; align-items: center;
            padding: 10px;
        }
        .modal-content {
            background: #08080a; width: 95%; max-width: 750px; padding: 60px;
            border-radius: 50px; border: 2px solid var(--p); position: relative;
            text-align: center; box-shadow: 0 0 100px rgba(255, 0, 255, 0.1);
            max-height: 95vh; overflow-y: auto;
        }
        .close-modal { position: absolute; top: 30px; right: 40px; font-size: 45px; cursor: pointer; opacity: 0.3; }

        /* –ë–∞–ª–∞–Ω—Å –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏ */
        .modal-balance-display {
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid var(--g);
            display: inline-flex; align-items: center; gap: 10px;
            padding: 8px 20px; border-radius: 50px;
            color: var(--g); font-weight: 900; margin-bottom: 20px;
        }

        /* –í–∏–¥–µ–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        #ad-wrapper {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 3000; flex-direction: column; align-items: center; justify-content: center;
        }
        #ad-video { width: 100%; max-width: 800px; height: auto; border-radius: 20px; }
        #ad-timer { margin-top: 20px; font-size: 24px; color: var(--g); font-weight: 900; }

        /* 
           ================================================================
           8. –ò–ì–†–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´ (Slots, Blackjack, etc.)
           ================================================================
        */
        .bet-input-area {
            margin: 25px 0; background: rgba(255,255,255,0.05);
            padding: 20px; border-radius: 20px; border: 1px solid var(--border);
            display: inline-block;
        }
        .bet-input-area input {
            background: #000; border: 1px solid var(--g); color: var(--g);
            font-size: 28px; font-weight: 900; width: 150px; text-align: center;
            padding: 10px; border-radius: 10px; outline: none;
        }

        .slot-frame {
            display: flex; gap: 20px; justify-content: center; margin: 40px 0;
            background: #000; padding: 30px; border-radius: 30px; border: 2px solid var(--border);
            flex-wrap: wrap;
        }
        .slot-box {
            width: 120px; height: 160px; background: #050505; border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 70px; border: 1px solid var(--border);
            text-shadow: 0 0 20px var(--c);
        }

        .card-area { display: flex; justify-content: center; gap: 15px; min-height: 150px; margin: 20px 0; flex-wrap: wrap; }
        .p-card {
            width: 90px; height: 130px; background: white; color: black;
            border-radius: 12px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; font-weight: 900;
            font-size: 28px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: cardSlide 0.4s ease-out; position: relative;
        }
        @keyframes cardSlide { from { transform: translateY(100px); opacity: 0; } }

        #roulette-result {
            width: 140px; height: 140px; border-radius: 50%; margin: 20px auto;
            display: flex; align-items: center; justify-content: center;
            font-size: 52px; font-weight: 900; border: 5px solid white;
            box-shadow: 0 0 40px rgba(255,255,255,0.1);
        }

        /* 
           ================================================================
           9. –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ö–õ–ê–°–°–´ –ò –ú–û–ë–ò–õ–ö–ê
           ================================================================
        */
        #toast {
            position: fixed; bottom: -100px; left: 50%; transform: translateX(-50%);
            background: white; color: black; padding: 20px 60px;
            border-radius: 100px; font-weight: 900; font-size: 22px;
            z-index: 9999; transition: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            white-space: nowrap;
        }

        footer { text-align: center; padding: 100px 0; opacity: 0.3; font-size: 13px; }
        .danger-zone { margin-top: 30px; opacity: 1; }
        .reset-btn { color: #ff4444; cursor: pointer; text-decoration: underline; font-weight: bold; }

        @media (max-width: 768px) {
            header { padding: 10px 3%; height: 70px; }
            .brand { font-size: 20px; }
            .balance-pill { padding: 6px 12px; gap: 6px; }
            #balance-val { font-size: 16px; }

            .hero { grid-template-columns: 1fr; text-align: center; padding: 30px 0; }
            .hero-info h1 { font-size: 38px; }
            
            .daily-section { padding: 25px 15px; border-radius: 25px; }
            .wheel-outer { width: 240px; height: 240px; }

            .modal-content { padding: 30px 10px; border-radius: 30px; width: 98%; }
            .close-modal { top: 15px; right: 20px; font-size: 35px; }

            .slot-box { width: 75px; height: 100px; font-size: 40px; }
            .p-card { width: 65px; height: 90px; font-size: 20px; }
            .bet-input-area input { font-size: 20px; width: 100px; }
            
            .grid-title { font-size: 20px; }
            .game-card { padding: 25px 10px; border-radius: 20px; }
        }
    </style>
</head>
<body class="theme-default">

    <!-- –ó–∞–¥–Ω–∏–π –ø–ª–∞–Ω (–ß–∞—Å—Ç–∏—Ü—ã) -->
    <canvas id="particle-canvas"></canvas>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <header>
        <div class="brand">LUCKY SPIN</div>
        <div class="balance-pill" id="bal-card">
            <span style="font-size: 24px;">üí∞</span>
            <span id="balance-val">1000</span>
        </div>
    </header>

    <!-- –ê—É–¥–∏–æ-—Ä–µ—Å—É—Ä—Å—ã -->
    <audio id="bg-music" loop src="bg_music.mp3"></audio>
    <div class="music-ctrl" onclick="toggleMusic()" id="music-btn">üîá</div>

    <main class="container">
        <!-- –ë–ª–æ–∫ Hero: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å -->
        <section class="hero">
            <div class="hero-info">
                <h1>FORTUNE<br><span>FAVORS</span> THE BOLD</h1>
                <p style="font-size: 20px; opacity: 0.6; margin-bottom: 40px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Definitive Edition. –¢–≤–æ–π –∞–∑–∞—Ä—Ç ‚Äî –Ω–∞—à–∞ —Å—Ç—Ä–∞—Å—Ç—å. –ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.</p>
                <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                    <button class="btn-glam" onclick="scrollToGrid()">–í –ò–ì–†–û–í–û–ô –ó–ê–õ</button>
                    <button class="btn-glam" style="background: var(--surface); border: 1px solid var(--border);" onclick="startVideoAd()">–†–ï–ö–õ–ê–ú–ê (+250 üí∞)</button>
                </div>
                
                <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫ -->
                <div class="referral-box">
                    <p>–¢–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID: <strong id="my-ref-code" style="color:var(--g)">LS-88921</strong></p>
                    <input type="text" id="friend-code" class="ref-input" placeholder="–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è">
                    <br>
                    <button class="btn-glam" style="padding: 10px 30px; font-size: 12px;" onclick="claimReferral()">–ü–û–õ–£–ß–ò–¢–¨ –ë–û–ù–£–° (+500)</button>
                </div>
            </div>
            
            <div class="daily-section">
                <div class="wheel-pointer"></div>
                <div class="wheel-outer" id="main-wheel"></div>
                <button class="btn-glam" id="daily-btn" onclick="spinDaily()">–ö–†–£–¢–ò–¢–¨ (FREE)</button>
                <p id="timer" style="margin-top: 20px; font-size: 14px; opacity: 0.5; font-weight: 700; text-transform: uppercase;"></p>
            </div>
        </section>

        <!-- –°–µ—Ç–∫–∞ –∏–≥—Ä–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤ -->
        <div class="grid-title">–ò–ì–†–û–í–û–ô –ó–ê–õ</div>
        <div class="games-grid" id="game-grid">
            
            <!-- Slots Card -->
            <div class="game-card" onclick="openGame('slots')">
                <svg viewBox="0 0 24 24"><path d="M19 5H5a2 2 0 00-2 2v10a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2zM7 5v14M12 5v14M17 5v14M2 12h20"></path></svg>
                <h3>ULTRA SLOTS</h3>
                <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–∂–µ–∫–ø–æ—Ç 777. –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑–±–æ–≥–∞—Ç–µ—Ç—å –≤ –æ–¥–∏–Ω –∫–ª–∏–∫.</p>
            </div>

            <!-- Blackjack Card (–ò–∫–æ–Ω–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ö–∞—Ä—Ç—ã) -->
            <div class="game-card" onclick="openGame('blackjack')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="5" width="12" height="16" rx="2" transform="rotate(-10 3 5)" />
                    <rect x="8" y="3" width="12" height="16" rx="2" />
                    <text x="11" y="14" font-family="Arial" font-size="8" font-weight="bold" fill="currentColor">21</text>
                </svg>
                <h3>PRO BLACKJACK</h3>
                <p>–ë–∏—Ç–≤–∞ —Å –¥–∏–ª–µ—Ä–æ–º –¥–æ 21. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ —Ö–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ ‚Äî —Ç–≤–æ–∏ –≥–ª–∞–≤–Ω—ã–µ —Å–æ—é–∑–Ω–∏–∫–∏.</p>
            </div>

            <!-- Roulette Card -->
            <div class="game-card" onclick="openGame('roulette')">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M12 2v20M2 12h20"></path><circle cx="12" cy="12" r="3"></circle></svg>
                <h3>GRAND ROULETTE</h3>
                <p>–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –∫–ª–∞—Å—Å–∏–∫–∞. –°—Ç–∞–≤—å –Ω–∞ –ó–µ—Ä–æ –∏ –ø–æ–ª—É—á–∏ —É–º–Ω–æ–∂–µ–Ω–∏–µ —Å–≤–æ–µ–π —Å—Ç–∞–≤–∫–∏ –≤ 35 —Ä–∞–∑.</p>
            </div>

            <!-- Dice Card -->
            <div class="game-card" onclick="openGame('dice')">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8" cy="8" r="1.5" fill="currentColor"></circle><circle cx="16" cy="16" r="1.5" fill="currentColor"></circle></svg>
                <h3>ORBITAL DICE</h3>
                <p>–£–≥–∞–¥–∞–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞. –ß–µ—Ç–Ω–æ–µ –∏–ª–∏ –Ω–µ—á–µ—Ç–Ω–æ–µ? –†–∏—Å–∫–Ω–∏ –∏ –∑–∞–±–µ—Ä–∏ –¥–≤–æ–π–Ω–æ–π –∫—É—à.</p>
            </div>

            <!-- Scratch Card -->
            <div class="game-card" onclick="openGame('scratch')">
                <svg viewBox="0 0 24 24"><path d="M20 7h-9m9 4h-9m9 4h-9M4 7h4v10H4z"></path></svg>
                <h3>SCRATCH LUCK</h3>
                <p>–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–æ—Ç–µ—Ä–µ—è. –°—Ç—Ä–∏—Ä–∞–π –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –∏ –Ω–∞—Ö–æ–¥–∏ —Å–∫—Ä—ã—Ç—ã–µ –ø—Ä–∏–∑—ã –∫–∞–∂–¥—ã–π —á–∞—Å.</p>
            </div>

            <!-- Shop Card -->
            <div class="game-card" onclick="openGame('shop')">
                <svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4H6z"></path><path d="M3 6h18M16 10a4 4 0 01-8 0"></path></svg>
                <h3>THE VAULT</h3>
                <p>–¢—Ä–∞—Ç—å –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã.</p>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 LUCKY SPIN CASINO SIMULATOR. DEFINITIVE EDITION V3.0</p>
            <div class="danger-zone">
                <span class="reset-btn" onclick="hardReset()">–°–ë–†–û–°–ò–¢–¨ –í–ï–°–¨ –ü–†–û–ì–†–ï–°–°</span>
            </div>
        </footer>
    </main>

    <!-- –í–∏–¥–µ–æ-–ø–ª–µ–µ—Ä –¥–ª—è —Ä–µ–∫–ª–∞–º—ã -->
    <div id="ad-wrapper">
        <h2 style="margin-bottom: 20px;">–†–ï–ö–õ–ê–ú–ù–ê–Ø –ü–ê–£–ó–ê</h2>
        <video id="ad-video" src="ad_video.mp4" playsinline></video>
        <div id="ad-timer">–û–°–¢–ê–õ–û–°–¨: 0 –°–ï–ö.</div>
        <p style="margin-top: 10px; opacity: 0.5;">–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –≤–∏–¥–µ–æ –¥–æ –∫–æ–Ω—Ü–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥—ã</p>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–≥—Ä—ã -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-ui"></div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="toast">–í–´–ò–ì–†–´–®!</div>

    <!-- 
       ================================================================
       JS ENGINE (–õ–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
       ================================================================
    -->
    <script>
        /* --- –ó–í–£–ö–û–í–û–ô –î–í–ò–ñ–û–ö --- */
        const aCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSfx(f, type, d, v = 0.1) {
            try {
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.type = type; o.frequency.value = f;
                g.gain.setValueAtTime(v, aCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.0001, aCtx.currentTime + d);
                o.connect(g); g.connect(aCtx.destination);
                o.start(); o.stop(aCtx.currentTime + d);
            } catch(e) { console.log("Audio play blocked"); }
        }

        const sfx = {
            click: () => playSfx(600, 'sine', 0.1),
            win: () => { 
                playSfx(523, 'square', 0.2); 
                setTimeout(()=>playSfx(659,'square',0.2), 100); 
                setTimeout(()=>playSfx(783,'square',0.4), 200); 
            },
            lose: () => {
                // –£–ª—É—á—à–µ–Ω–Ω—ã–π –∑–≤—É–∫ –ø—Ä–æ–∏–≥—Ä—ã—à–∞ (—Å–ª–∞–π–¥ –≤–Ω–∏–∑)
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.frequency.setValueAtTime(300, aCtx.currentTime);
                o.frequency.exponentialRampToValueAtTime(100, aCtx.currentTime + 0.5);
                g.gain.setValueAtTime(0.1, aCtx.currentTime);
                g.gain.linearRampToValueAtTime(0, aCtx.currentTime + 0.5);
                o.connect(g); g.connect(aCtx.destination);
                o.start(); o.stop(aCtx.currentTime + 0.5);
            },
            spin: () => playSfx(Math.random()*300+300, 'sine', 0.05),
            card: () => playSfx(400, 'triangle', 0.1)
        };

        /* --- –ú–£–ó–´–ö–ê --- */
        let musicPlaying = false;
        const bgMusic = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');

        function toggleMusic() {
            if(musicPlaying) {
                bgMusic.pause();
                musicBtn.innerText = 'üîá';
            } else {
                bgMusic.play().catch(() => console.log("User must interact first"));
                musicBtn.innerText = 'üîä';
            }
            musicPlaying = !musicPlaying;
        }

        /* --- –°–û–°–¢–û–Ø–ù–ò–ï –ò –°–û–•–†–ê–ù–ï–ù–ò–ï --- */
        let state = {
            bal: 1000,
            lastDaily: 0,
            lastScratch: 0,
            unlocked: ['theme-default'],
            theme: 'theme-default',
            refClaimed: false
        };

        function save() { localStorage.setItem('luckyspin_v3_enc', JSON.stringify(state)); }
        function load() {
            const d = localStorage.getItem('luckyspin_v3_enc');
            if(d) state = JSON.parse(d);
            updateBalance(0);
            applyTheme(state.theme);
        }

        function updateBalance(amt) {
            state.bal += amt;
            document.querySelectorAll('.bal-val-sync').forEach(el => el.innerText = Math.floor(state.bal));
            document.getElementById('balance-val').innerText = Math.floor(state.bal);
            
            const card = document.getElementById('bal-card');
            if(amt !== 0) {
                card.style.transform = 'scale(1.15)';
                setTimeout(()=>card.style.transform='scale(1)', 200);
            }
            if(amt > 0) {
                showToast(`+${amt} üí∞`);
                sfx.win();
                confettiBurst();
            }
            save();
        }

        function showToast(m) {
            const t = document.getElementById('toast');
            t.innerText = m; t.style.bottom = '50px';
            setTimeout(()=>t.style.bottom='-100px', 3000);
        }

        /* --- –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ (Particles) --- */
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let parts = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.onresize = resize; resize();

        class Particle {
            constructor() { this.init(); }
            init() {
                this.x = Math.random()*canvas.width;
                this.y = Math.random()*canvas.height;
                this.s = Math.random()*2 + 1;
                this.v = Math.random()*0.4 + 0.1;
                this.color = Math.random() > 0.5 ? getComputedStyle(document.body).getPropertyValue('--p') : getComputedStyle(document.body).getPropertyValue('--c');
            }
            update() {
                this.y -= this.v;
                if(this.y < -10) this.y = canvas.height + 10;
            }
            draw() {
                ctx.globalAlpha = 0.3;
                ctx.fillStyle = this.color;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, 7); ctx.fill();
            }
        }
        for(let i=0; i<100; i++) parts.push(new Particle());

        function confettiBurst() {
            for(let i=0; i<50; i++) {
                parts.push({
                    x: canvas.width/2, y: canvas.height/3,
                    s: Math.random()*8+2, vx: (Math.random()-0.5)*20, vy: (Math.random()-0.5)*20,
                    life: 1, c: `hsl(${Math.random()*360}, 100%, 50%)`,
                    conf: true,
                    update() { this.x += this.vx; this.y += this.vy; this.vy += 0.4; this.life -= 0.015; },
                    draw() {
                        ctx.globalAlpha = this.life;
                        ctx.fillStyle = this.c;
                        ctx.fillRect(this.x, this.y, this.s, this.s);
                    }
                });
            }
        }

        function animate() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            parts.forEach((p, i) => {
                p.update(); p.draw();
                if(p.conf && p.life <= 0) parts.splice(i, 1);
            });
            requestAnimationFrame(animate);
        }
        animate();

        /* --- –ú–û–î–ê–õ–¨–ù–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï --- */
        function openGame(g) {
            sfx.click();
            const modal = document.getElementById('modal');
            const ui = document.getElementById('modal-ui');
            modal.style.display = 'flex';
            ui.innerHTML = `
                <div class="modal-balance-display">
                    üí∞ –ë–ê–õ–ê–ù–°: <span class="bal-val-sync">${state.bal}</span>
                </div>
                <div id="game-content"></div>
            `;
            const content = document.getElementById('game-content');
            
            if(g === 'slots') initSlots(content);
            if(g === 'blackjack') initBJ(content);
            if(g === 'roulette') initRoulette(content);
            if(g === 'dice') initDice(content);
            if(g === 'scratch') initScratch(content);
            if(g === 'shop') initShop(content);
        }

        function closeModal() { 
            document.getElementById('modal').style.display = 'none'; 
            sfx.click(); 
            bjActive = false; // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–ª—ç–∫–¥–∂–µ–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        }

        /* --- –°–ò–°–¢–ï–ú–ê –í–ò–î–ï–û-–†–ï–ö–õ–ê–ú–´ --- */
        function startVideoAd() {
            const wrapper = document.getElementById('ad-wrapper');
            const video = document.getElementById('ad-video');
            const timer = document.getElementById('ad-timer');
            
            wrapper.style.display = 'flex';
            video.play().catch(() => {
                alert("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–π—Ç–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π.");
                wrapper.style.display = 'none';
            });

            const checkProgress = setInterval(() => {
                const remaining = Math.ceil(video.duration - video.currentTime);
                timer.innerText = `–û–°–¢–ê–õ–û–°–¨: ${remaining || 0} –°–ï–ö.`;
            }, 500);

            video.onended = () => {
                clearInterval(checkProgress);
                wrapper.style.display = 'none';
                updateBalance(250);
                showToast("–ù–ê–ì–†–ê–î–ê –ü–û–õ–£–ß–ï–ù–ê!");
            };
        }

        /* --- –ò–ì–†–ê: ULTRA SLOTS --- */
        const SLOTS_ITEMS = ['üíé', 'üçã', 'üçí', 'üîî', 'üçá', '7Ô∏è‚É£'];
        function initSlots(target) {
            target.innerHTML = `
                <h2>ULTRA SLOTS</h2>
                <div class="slot-frame">
                    <div class="slot-box" id="s1">üíé</div>
                    <div class="slot-box" id="s2">üíé</div>
                    <div class="slot-box" id="s3">üíé</div>
                </div>
                <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50"></div>
                <br>
                <button class="btn-glam" id="spin-btn" onclick="playSlots()">–í–†–ê–©–ê–¢–¨</button>
            `;
        }
        function playSlots() {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return showToast("–ú–ê–õ–û –ú–û–ù–ï–¢!");
            updateBalance(-bet);
            const btn = document.getElementById('spin-btn');
            btn.disabled = true;
            let count = 0;
            const iv = setInterval(() => {
                sfx.spin();
                document.getElementById('s1').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                document.getElementById('s2').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                document.getElementById('s3').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                if(++count > 20) {
                    clearInterval(iv);
                    const r = [document.getElementById('s1').innerText, document.getElementById('s2').innerText, document.getElementById('s3').innerText];
                    if(r[0]===r[1] && r[1]===r[2]) updateBalance(bet*10);
                    else if(r[0]===r[1] || r[1]===r[2] || r[0]===r[2]) updateBalance(bet*2);
                    else { sfx.lose(); showToast("–ü–†–û–ò–ì–†–´–®"); }
                    btn.disabled = false;
                }
            }, 70);
        }

        /* --- –ò–ì–†–ê: PRO BLACKJACK (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ "—Ö–≤–∞—Ç–∏—Ç" –ø—Ä–∏ –ø–µ—Ä–µ–±–æ—Ä–µ) --- */
        let deck, pHand, dHand, bjBet, bjActive = false;

        function initBJ(target) {
            target.innerHTML = `
                <h2>PRO BLACKJACK</h2>
                <div style="margin: 20px 0;">
                    <p style="opacity: 0.5;">–î–ò–õ–ï–†: <span id="ds">0</span></p>
                    <div id="d-cards" class="card-area"></div>
                    <p style="opacity: 0.5;">–í–´: <span id="ps">0</span></p>
                    <div id="p-cards" class="card-area"></div>
                </div>
                <div id="bj-controls">
                    <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="100"></div><br>
                    <button class="btn-glam" onclick="startBJ()">–ù–ê–ß–ê–¢–¨ –†–ê–ó–î–ê–ß–£</button>
                </div>
            `;
        }

        function startBJ() {
            bjBet = parseInt(document.getElementById('bet-val').value);
            if(bjBet > state.bal || bjBet <= 0) return showToast("–û–®–ò–ë–ö–ê –°–¢–ê–í–ö–ò");
            
            updateBalance(-bjBet);
            bjActive = true;
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–ª–æ–¥—ã
            deck = []; const suits = ['‚ô†','‚ô£','‚ô•','‚ô¶'], values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            for(let s of suits) for(let v of values) deck.push({v, s});
            deck.sort(() => Math.random()-0.5);

            pHand = [deck.pop(), deck.pop()]; 
            dHand = [deck.pop()];
            
            renderBJ();
            document.getElementById('bj-controls').innerHTML = `
                <button class="btn-glam" id="bj-hit-btn" onclick="bjMove('hit')">–ï–©–ï</button>
                <button class="btn-glam" id="bj-stand-btn" style="background:#444" onclick="bjMove('stand')">–•–í–ê–¢–ò–¢</button>
            `;
        }

        function renderBJ() {
            const p = document.getElementById('p-cards'), d = document.getElementById('d-cards');
            p.innerHTML = ''; d.innerHTML = '';
            pHand.forEach(c => p.innerHTML += `<div class="p-card"><span>${c.v}</span><small>${c.s}</small></div>`);
            dHand.forEach(c => d.innerHTML += `<div class="p-card"><span>${c.v}</span><small>${c.s}</small></div>`);
            document.getElementById('ps').innerText = getBJScore(pHand);
            document.getElementById('ds').innerText = getBJScore(dHand);
            sfx.card();
        }

        function getBJScore(h) {
            let s = 0, aces = 0;
            h.forEach(c => {
                if(['J','Q','K'].includes(c.v)) s += 10;
                else if(c.v === 'A') { s += 11; aces++; }
                else s += parseInt(c.v);
            });
            while(s > 21 && aces > 0) { s -= 10; aces--; }
            return s;
        }

        function bjMove(move) {
            if(!bjActive) return; // –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–∏—à–Ω–∏—Ö –Ω–∞–∂–∞—Ç–∏–π

            if(move === 'hit') {
                pHand.push(deck.pop());
                renderBJ();
                if(getBJScore(pHand) > 21) {
                    bjActive = false; // –ë–ª–æ–∫–∏—Ä—É–µ–º –∏–≥—Ä—É —Å—Ä–∞–∑—É
                    finalizeBJ('lose');
                }
            } else {
                bjActive = false; // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
                while(getBJScore(dHand) < 17) dHand.push(deck.pop());
                renderBJ();
                const ps = getBJScore(pHand), ds = getBJScore(dHand);
                if(ds > 21 || ps > ds) finalizeBJ('win');
                else if(ps === ds) finalizeBJ('draw');
                else finalizeBJ('lose');
            }
        }

        function finalizeBJ(res) {
            document.getElementById('bj-hit-btn').disabled = true;
            document.getElementById('bj-stand-btn').disabled = true;
            
            if(res === 'win') {
                updateBalance(bjBet * 2);
                showToast("–ü–û–ë–ï–î–ê!");
            } else if(res === 'draw') {
                updateBalance(bjBet);
                showToast("–ù–ò–ß–¨–Ø");
            } else {
                sfx.lose();
                showToast("–ü–ï–†–ï–ë–û–† / –ü–†–û–ò–ì–†–´–®");
            }
            setTimeout(() => { if(document.getElementById('modal').style.display === 'flex') openGame('blackjack'); }, 2000);
        }

        /* --- –ò–ì–†–ê: GRAND ROULETTE --- */
        function initRoulette(target) {
            target.innerHTML = `
                <h2>GRAND ROULETTE</h2>
                <div id="roulette-result" style="background: #222;">?</div>
                <div id="rou-info" style="margin-bottom: 20px; font-weight: 900; color: #aaa;">–í–´–ë–ï–†–ò–¢–ï –¶–í–ï–¢</div>
                <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50"></div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <button class="btn-glam" style="background:#e11d48" onclick="playRou('red')">RED x2</button>
                    <button class="btn-glam" style="background:#111; border:1px solid #333;" onclick="playRou('black')">BLACK x2</button>
                    <button class="btn-glam" style="background:#10b981; grid-column: span 2;" onclick="playRou('zero')">ZERO x35</button>
                </div>
            `;
        }
        function playRou(pick) {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return showToast("–ú–ê–õ–û –ú–û–ù–ï–¢");
            updateBalance(-bet);
            let count = 0;
            const resBox = document.getElementById('roulette-result');
            const iv = setInterval(() => {
                sfx.spin();
                const tempNum = Math.floor(Math.random()*37);
                resBox.innerText = tempNum;
                if(++count > 25) {
                    clearInterval(iv);
                    const num = Math.floor(Math.random()*37);
                    const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(num);
                    const color = num === 0 ? 'zero' : (isRed ? 'red' : 'black');
                    resBox.innerText = num;
                    resBox.style.background = color === 'zero' ? '#10b981' : (color === 'red' ? '#e11d48' : '#111');
                    if(pick === color) updateBalance(color === 'zero' ? bet*35 : bet*2);
                    else { sfx.lose(); showToast("–ü–†–û–ò–ì–†–´–®"); }
                }
            }, 60);
        }

        /* --- –ò–ì–†–ê: ORBITAL DICE --- */
        function initDice(target) {
            target.innerHTML = `
                <h2>ORBITAL DICE</h2>
                <div id="dice-res" style="font-size: 80px; margin: 30px;">üé≤ üé≤</div>
                <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50"></div><br>
                <div style="display:flex; gap:10px; justify-content:center;">
                    <button class="btn-glam" onclick="playDice('even')">–ß–ï–¢–ù–û–ï x2</button>
                    <button class="btn-glam" onclick="playDice('odd')">–ù–ï–ß–ï–¢–ù–û–ï x2</button>
                </div>
            `;
        }
        function playDice(pick) {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return;
            updateBalance(-bet);
            const d1 = Math.floor(Math.random()*6)+1, d2 = Math.floor(Math.random()*6)+1;
            const sum = d1 + d2;
            const icons = ['‚öÄ','‚öÅ','‚öÇ','‚öÉ','‚öÑ','‚öÖ'];
            document.getElementById('dice-res').innerText = `${icons[d1-1]} ${icons[d2-1]}`;
            const isEven = sum % 2 === 0;
            if((pick === 'even' && isEven) || (pick === 'odd' && !isEven)) updateBalance(bet*2);
            else { sfx.lose(); showToast("–ù–ï –£–ì–ê–î–ê–õ"); }
        }

        /* --- –ò–ì–†–ê: SCRATCH LUCK --- */
        let scratchClaimed = false;
        function initScratch(target) {
            const now = Date.now();
            if(now - state.lastScratch < 3600000) {
                const diff = 3600000 - (now - state.lastScratch);
                target.innerHTML = `<h2>SCRATCH LUCK</h2><p style="margin:20px 0;">–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ${Math.ceil(diff/60000)} –º–∏–Ω.</p>`;
                return;
            }
            target.innerHTML = `
                <h2>SCRATCH LUCK</h2>
                <div style="position:relative; width:300px; height:150px; margin:20px auto;">
                    <canvas id="scratch-canvas" width="300" height="150" style="position:absolute; top:0; left:0; z-index:2; cursor:crosshair;"></canvas>
                    <div style="position:absolute; top:0; left:0; width:300px; height:150px; background:#111; color:#ffcc00; display:flex; align-items:center; justify-content:center; font-size:30px; font-weight:bold; border-radius:30px; z-index:1;">üí∞ 1000</div>
                </div>
                <p style="opacity:0.5;">–°–æ—Ç—Ä–∏ 75% –∑–∞—â–∏—Ç–Ω–æ–≥–æ —Å–ª–æ—è</p>
            `;
            const canv = document.getElementById('scratch-canvas'), c = canv.getContext('2d');
            c.fillStyle = '#666'; 
            c.beginPath(); c.roundRect(0,0,300,150,30); c.fill();
            
            const handleScratch = (e) => {
                const r = canv.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - r.left;
                const y = (e.clientY || e.touches[0].clientY) - r.top;
                c.globalCompositeOperation = 'destination-out';
                c.beginPath(); c.arc(x, y, 20, 0, 7); c.fill();
                
                const data = c.getImageData(0,0,300,150).data;
                let cleared = 0;
                for(let i=3; i<data.length; i+=4) if(data[i] === 0) cleared++;
                if(cleared > 33000 && !scratchClaimed) {
                    scratchClaimed = true;
                    state.lastDaily = Date.now();
                    updateBalance(1000);
                    setTimeout(() => { scratchClaimed = false; closeModal(); }, 2000);
                }
            };
            canv.ontouchmove = (e) => { handleScratch(e); e.preventDefault(); };
            canv.onmousemove = handleScratch;
        }

        /* --- –ú–ê–ì–ê–ó–ò–ù –¢–ï–ú --- */
        function initShop(target) {
            const themes = [
                {id: 'theme-default', name: 'NEON BLUE', price: 0},
                {id: 'theme-emerald', name: 'EMERALD LUX', price: 5000},
                {id: 'theme-ruby', name: 'RUBY DARK', price: 15000},
                {id: 'theme-gold', name: 'PURE GOLD', price: 50000}
            ];
            target.innerHTML = `<h2>THE VAULT</h2><br>`;
            themes.forEach(t => {
                const owned = state.unlocked.includes(t.id);
                target.innerHTML += `
                    <div style="display:flex; justify-content:space-between; align-items:center; padding:20px; background:var(--surface); border-radius:20px; margin-bottom:10px; border: 1px solid var(--border);">
                        <span>${t.name}</span>
                        <button class="btn-glam" style="padding:10px 20px; font-size:12px;" onclick="buyTheme('${t.id}', ${t.price})">
                            ${owned ? (state.theme === t.id ? 'ACTIVE' : 'SELECT') : t.price + ' üí∞'}
                        </button>
                    </div>
                `;
            });
        }
        function buyTheme(id, p) {
            if(state.unlocked.includes(id)) { state.theme = id; applyTheme(id); openGame('shop'); }
            else if(state.bal >= p) { updateBalance(-p); state.unlocked.push(id); state.theme = id; applyTheme(id); openGame('shop'); }
            else showToast("–ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –°–†–ï–î–°–¢–í");
        }
        function applyTheme(id) { document.body.className = id; save(); }

        /* --- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò --- */
        function spinDaily() {
            const now = Date.now();
            if(now - state.lastDaily < 86400000) return showToast("–ï–©–ï –ù–ï –í–†–ï–ú–Ø");
            const deg = 1800 + Math.random()*1800;
            document.getElementById('main-wheel').style.transform = `rotate(${deg}deg)`;
            document.getElementById('daily-btn').disabled = true;
            state.lastDaily = now;
            setTimeout(()=> { updateBalance(500); updateTimer(); }, 5000);
        }

        function updateTimer() {
            const left = 86400000 - (Date.now() - state.lastDaily);
            const timerEl = document.getElementById('timer');
            if(left > 0 && timerEl) {
                const h = Math.floor(left/3600000), m = Math.floor((left%3600000)/60000);
                timerEl.innerText = `–°–õ–ï–î–£–Æ–©–ò–ô –ß–ï–†–ï–ó ${h}–ß. ${m}–ú.`;
                document.getElementById('daily-btn').disabled = true;
            } else {
                if(timerEl) timerEl.innerText = "–ì–û–¢–û–í–û –ö –í–†–ê–©–ï–ù–ò–Æ";
                document.getElementById('daily-btn').disabled = false;
            }
        }

        function claimReferral() {
            if(state.refClaimed) return alert("–ë–û–ù–£–° –£–ñ–ï –ü–û–õ–£–ß–ï–ù");
            if(document.getElementById('friend-code').value.length > 4) {
                state.refClaimed = true; updateBalance(500); save();
                alert("–ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +500 –º–æ–Ω–µ—Ç.");
            }
        }

        function scrollToGrid() { document.getElementById('game-grid').scrollIntoView({behavior:'smooth'}); }
        function hardReset() { if(confirm("–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ?")) { localStorage.clear(); location.reload(); } }

        /* –°–¢–ê–†–¢ */
        window.onload = () => {
            load();
            setInterval(updateTimer, 60000);
            updateTimer();
        };
    </script>
</body>
</html>
