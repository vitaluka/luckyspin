<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LuckySpin Grand Luxury | The Definitive Edition V3.6</title>
    
    <!-- 
       ================================================================
       –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –í–ù–ï–®–ù–ò–• –†–ï–°–£–†–°–û–í
       ================================================================
    -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        /* 
           ================================================================
           1. –¶–í–ï–¢–û–í–ê–Ø –ü–ê–õ–ò–¢–†–ê –ò –î–ò–ó–ê–ô–ù-–°–ò–°–¢–ï–ú–ê (CSS VARIABLES)
           ================================================================
        */
        :root {
            --p: #ff00ff; /* Neon Pink */
            --c: #00f2ff; /* Neon Cyan */
            --g: #ffcc00; /* Gold Accent */
            --b: #050508; /* Deep Background */
            --surface: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --grad: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --shadow: 0 0 25px rgba(255, 0, 255, 0.3);
            --glass: rgba(255, 255, 255, 0.03);
            --transition-smooth: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --transition-fast: 0.2s ease-out;
        }

        /* 
           ================================================================
           2. –¢–ï–ú–´ –û–§–û–†–ú–õ–ï–ù–ò–Ø (THE VAULT SYSTEM)
           ================================================================
        */
        body.theme-emerald { 
            --p: #10b981; 
            --c: #34d399; 
            --grad: linear-gradient(135deg, #064e3b, #065f46); 
        }
        body.theme-ruby { 
            --p: #e11d48; 
            --c: #fb7185; 
            --grad: linear-gradient(135deg, #4c0519, #881337); 
        }
        body.theme-gold { 
            --p: #ffcc00; 
            --c: #ffffff; 
            --grad: linear-gradient(135deg, #434343, #000000); 
        }

        /* 
           ================================================================
           3. –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –ò –°–ë–†–û–° (RESET)
           ================================================================
        */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Montserrat', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            -webkit-user-select: none;
            user-select: none;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            background: var(--b);
            background-image: var(--grad);
            color: white;
            overflow-x: hidden;
            background-attachment: fixed;
            overscroll-behavior-y: contain; /* –ó–∞—â–∏—Ç–∞ –æ—Ç pull-to-refresh –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        }

        /* –ö–∞–Ω–≤–∞—Å –¥–ª—è —á–∞—Å—Ç–∏—Ü (–∑–∞–¥–Ω–∏–π –ø–ª–∞–Ω) */
        canvas#particle-canvas {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            z-index: -1; 
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 0 20px; 
        }

        /* 
           ================================================================
           4. –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ (HEADER)
           ================================================================
        */
        header {
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            padding: 15px 5%;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            border-bottom: 2px solid var(--p);
            position: sticky; 
            top: 0; 
            z-index: 1000;
            box-shadow: 0 10px 35px rgba(0,0,0,0.6);
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: clamp(20px, 4vw, 28px); 
            font-weight: 900; 
            letter-spacing: 2px;
            background: linear-gradient(to right, #fff, var(--g));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .balance-pill {
            background: var(--surface);
            border: 2px solid var(--g);
            padding: clamp(6px, 2vw, 10px) clamp(12px, 3vw, 25px);
            border-radius: 100px;
            display: flex; 
            align-items: center; 
            gap: 12px;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.2);
            transition: var(--transition-smooth);
        }
        
        #balance-val { 
            font-weight: 900; 
            color: var(--g); 
            font-size: clamp(16px, 4vw, 24px); 
        }

        /* 
           ================================================================
           5. –£–ü–†–ê–í–õ–ï–ù–ò–ï (FLOATING CONTROLS)
           ================================================================
        */
        .controls-wrapper {
            position: fixed; 
            bottom: 25px; 
            right: 25px;
            display: flex; 
            flex-direction: column; 
            gap: 15px;
            z-index: 1001;
        }

        .ctrl-btn {
            background: rgba(0,0,0,0.7); 
            border: 1px solid var(--border);
            padding: 12px; 
            border-radius: 50%; 
            width: 55px; 
            height: 55px;
            display: flex; 
            align-items: center; 
            justify-content: center;
            cursor: pointer; 
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            transition: var(--transition-smooth);
            font-size: 20px;
        }
        
        .ctrl-btn:active { transform: scale(0.9); }

        /* 
           ================================================================
           6. –°–ï–ö–¶–ò–Ø HERO (WELCOME & DAILY WHEEL)
           ================================================================
        */
        .hero {
            display: grid; 
            grid-template-columns: 1.1fr 0.9fr;
            gap: 60px; 
            padding: 80px 0; 
            align-items: center;
        }

        .hero-info h1 {
            font-size: clamp(32px, 6vw, 72px); 
            font-weight: 900; 
            line-height: 1;
            margin-bottom: 30px; 
            text-transform: uppercase;
        }
        
        .hero-info span { 
            color: var(--p); 
            text-shadow: 0 0 25px var(--p); 
        }

        .daily-section {
            background: var(--surface); 
            border: 1px solid var(--border);
            padding: 50px; 
            border-radius: 60px; 
            text-align: center;
            backdrop-filter: blur(20px); 
            position: relative;
            box-shadow: inset 0 0 50px rgba(255,255,255,0.02);
        }

        .wheel-outer {
            width: clamp(240px, 80vw, 360px); 
            height: clamp(240px, 80vw, 360px); 
            margin: 0 auto 40px;
            border: 12px solid var(--g); 
            border-radius: 50%;
            position: relative; 
            overflow: hidden;
            background: conic-gradient(
                #111 0deg 45deg, var(--p) 45deg 90deg, 
                #222 90deg 135deg, var(--c) 135deg 180deg,
                #111 180deg 225deg, var(--p) 225deg 270deg,
                #222 270deg 315deg, var(--c) 315deg 360deg
            );
            transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.7);
        }

        .wheel-pointer {
            position: absolute; 
            top: -15px; 
            left: 50%;
            transform: translateX(-50%); 
            z-index: 10;
            width: 0; 
            height: 0; 
            border-left: 25px solid transparent;
            border-right: 25px solid transparent; 
            border-top: 40px solid var(--g);
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5));
        }

        /* 
           ================================================================
           7. –ö–ù–û–ü–ö–ò –ò UI –≠–õ–ï–ú–ï–ù–¢–´
           ================================================================
        */
        .btn-glam {
            background: linear-gradient(45deg, var(--p), var(--c));
            color: white; 
            border: none; 
            padding: 20px 45px;
            border-radius: 100px; 
            font-weight: 900; 
            font-size: 16px;
            cursor: pointer; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            transition: var(--transition-smooth);
            position: relative; 
            overflow: hidden;
        }

        .btn-glam:hover:not(:disabled) { 
            transform: translateY(-7px) scale(1.05); 
            box-shadow: 0 0 40px var(--p); 
        }

        .btn-glam:disabled { 
            background: #222; 
            color: #555; 
            cursor: not-allowed; 
            transform: scale(0.98); 
        }

        /* 
           ================================================================
           8. –ò–ì–†–û–í–û–ô –ó–ê–õ (GAMES GRID)
           ================================================================
        */
        .grid-title {
            margin: 80px 0 40px; 
            font-size: clamp(24px, 5vw, 40px); 
            font-weight: 900;
            display: flex; 
            align-items: center; 
            gap: 25px; 
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .grid-title::after { 
            content: ''; 
            height: 3px; 
            flex: 1; 
            background: linear-gradient(to right, var(--p), transparent); 
        }

        .games-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 35px; 
            margin-bottom: 120px;
        }

        .game-card {
            background: var(--surface); 
            border: 1px solid var(--border);
            border-radius: 45px; 
            padding: 60px 35px; 
            text-align: center;
            transition: 0.5s cubic-bezier(0.075, 0.82, 0.165, 1); 
            cursor: pointer;
            position: relative; 
            overflow: hidden;
        }

        .game-card:hover { 
            transform: translateY(-20px); 
            border-color: var(--p); 
            background: rgba(255,255,255,0.07); 
        }

        .game-card svg {
            width: 80px; 
            height: 80px; 
            margin-bottom: 30px;
            stroke: var(--c); 
            fill: none; 
            stroke-width: 1.5;
            filter: drop-shadow(0 0 20px var(--c));
        }

        .game-card h3 { 
            font-size: 28px; 
            font-weight: 900; 
            margin-bottom: 15px; 
        }

        /* 
           ================================================================
           9. –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê (MODAL SYSTEM)
           ================================================================
        */
        .modal {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: rgba(0,0,0,0.98); 
            z-index: 2000;
            backdrop-filter: blur(30px); 
            -webkit-backdrop-filter: blur(30px);
            justify-content: center; 
            align-items: center;
            padding: 10px;
        }

        .modal-content {
            background: #08080a; 
            width: 95%; 
            max-width: 850px; 
            padding: clamp(30px, 8vw, 70px) 20px;
            border-radius: clamp(30px, 10vw, 60px); 
            border: 2px solid var(--p); 
            position: relative;
            text-align: center; 
            box-shadow: 0 0 120px rgba(255, 0, 255, 0.15);
            max-height: 98vh; 
            overflow-y: auto;
        }

        .close-modal { 
            position: absolute; 
            top: 25px; 
            right: 30px; 
            font-size: 45px; 
            cursor: pointer; 
            opacity: 0.4; 
            z-index: 10;
        }

        /* 
           ================================================================
           10. –ò–ì–†–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´ (SLOTS, CARDS, DICE)
           ================================================================
        */
        .slot-frame {
            display: flex; 
            gap: 15px; 
            justify-content: center; 
            margin: 30px 0;
            background: #000; 
            padding: clamp(15px, 5vw, 40px); 
            border-radius: 40px; 
            border: 3px solid var(--border);
        }

        .slot-box {
            width: clamp(70px, 20vw, 130px); 
            height: clamp(100px, 30vw, 180px); 
            background: linear-gradient(to bottom, #111, #050505);
            border-radius: 20px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: clamp(40px, 12vw, 80px); 
            border: 1px solid rgba(255,255,255,0.1);
            text-shadow: 0 0 20px var(--c);
        }

        .card-area { 
            display: flex; 
            justify-content: center; 
            gap: 10px; 
            min-height: 140px; 
            margin: 20px 0; 
            flex-wrap: wrap; 
        }

        .p-card {
            width: clamp(65px, 18vw, 100px); 
            height: clamp(95px, 25vw, 145px); 
            background: white; 
            color: black;
            border-radius: 12px; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            font-weight: 900;
            font-size: clamp(20px, 5vw, 32px); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            animation: cardSlide 0.5s ease-out;
        }

        /* 
           ================================================================
           11. –ú–û–ë–ò–õ–¨–ù–ê–Ø –ê–î–ê–ü–¢–ê–¶–ò–Ø (CRITICAL MEDIA QUERIES)
           ================================================================
        */
        @media (max-width: 768px) {
            .hero { 
                grid-template-columns: 1fr; 
                text-align: center; 
                padding: 40px 0; 
                gap: 50px; 
            }
            
            .hero-info { order: 2; }
            .daily-section { order: 1; padding: 40px 20px; }

            .games-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .game-card {
                padding: 40px 20px;
                border-radius: 35px;
            }

            .bet-input-area input {
                width: 120px;
                font-size: 24px;
            }

            .btn-glam {
                width: 100%;
                padding: 18px 20px;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 10px 3%;
            }
            
            .balance-pill {
                gap: 6px;
                padding: 6px 12px;
            }

            .modal-content {
                width: 98%;
                padding: 50px 15px 30px;
            }

            .grid-title {
                letter-spacing: 2px;
            }
            
            .controls-wrapper {
                bottom: 15px;
                right: 15px;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes cardSlide { from { transform: translateY(50px); opacity: 0; } }

        #toast {
            position: fixed; 
            bottom: -120px; 
            left: 50%; 
            transform: translateX(-50%);
            background: white; 
            color: black; 
            padding: 20px 50px;
            border-radius: 100px; 
            font-weight: 900; 
            font-size: 20px;
            z-index: 9999; 
            transition: 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            white-space: nowrap;
        }

        footer { text-align: center; padding: 100px 0; opacity: 0.4; font-size: 13px; }
        .reset-btn { color: #ff4444; cursor: pointer; text-decoration: underline; margin-top: 20px; display: inline-block; }
    </style>
</head>
<body class="theme-default">

    <!-- –§–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã -->
    <canvas id="particle-canvas"></canvas>

    <!-- –®–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <header>
        <div class="brand">LUCKY SPIN</div>
        <div class="balance-pill" id="bal-card">
            <span style="font-size: clamp(18px, 4vw, 24px);">üí∞</span>
            <span id="balance-val">1000</span>
        </div>
    </header>

    <!-- –ó–≤—É–∫–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã -->
    <audio id="bg-music" loop preload="auto">
        <source src="bg_music.mp3" type="audio/mpeg">
    </audio>

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div class="controls-wrapper">
        <div class="ctrl-btn" onclick="toggleParticles()" id="fx-btn">‚ú®</div>
        <div class="ctrl-btn" onclick="toggleMusic()" id="music-btn">üîá</div>
    </div>

    <main class="container">
        <!-- –ë–ª–æ–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞ -->
        <section class="hero">
            <div class="hero-info">
                <h1>FORTUNE<br><span>FAVORS</span> THE BOLD</h1>
                <p style="font-size: 18px; opacity: 0.7; margin-bottom: 40px; line-height: 1.6;">
                    –ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É –≤ —Å–∞–º–æ–º —Ä–æ—Å–∫–æ—à–Ω–æ–º —Å–∏–º—É–ª—è—Ç–æ—Ä–µ –∫–∞–∑–∏–Ω–æ. 
                    –¢–≤–æ–π –ø—É—Ç—å –∫ –±–æ–≥–∞—Ç—Å—Ç–≤—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å.
                </p>
                <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                    <button class="btn-glam" onclick="scrollToGrid()">–ò–ì–†–û–í–û–ô –ó–ê–õ</button>
                    <button class="btn-glam" style="background: var(--surface); border: 1px solid var(--border);" onclick="startVideoAd()">–†–ï–ö–õ–ê–ú–ê (+250 üí∞)</button>
                </div>
                
                <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫ -->
                <div style="background: rgba(0,0,0,0.3); border: 1px dashed var(--g); padding: 30px; border-radius: 35px; margin-top: 40px;">
                    <p style="font-weight: 700; color: var(--g); margin-bottom: 15px;">–í–ê–® ID: <span id="my-ref-code">LS-99210</span></p>
                    <input type="text" id="friend-code" style="background: rgba(0,0,0,0.5); border: 1px solid var(--border); padding: 12px; border-radius: 12px; color: white; text-align: center; width: 100%; max-width: 250px; margin-bottom: 15px;" placeholder="–ö–æ–¥ –¥—Ä—É–≥–∞">
                    <br>
                    <button class="btn-glam" style="padding: 12px 30px; font-size: 12px;" onclick="claimReferral()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ (+500)</button>
                </div>
            </div>
            
            <div class="daily-section">
                <div class="wheel-pointer"></div>
                <div class="wheel-outer" id="main-wheel"></div>
                <button class="btn-glam" id="daily-btn" onclick="spinDaily()">–ö–†–£–¢–ò–¢–¨ (FREE)</button>
                <p id="timer" style="margin-top: 25px; font-size: 14px; opacity: 0.6; font-weight: 700;"></p>
            </div>
        </section>

        <!-- –ó–∞–ª –∏–≥—Ä -->
        <div class="grid-title">PREMIUM GAMES</div>
        <div class="games-grid" id="game-grid">
            
            <div class="game-card" onclick="openGame('slots')">
                <svg viewBox="0 0 24 24"><path d="M19 5H5a2 2 0 00-2 2v10a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2zM7 5v14M12 5v14M17 5v14M2 12h20"></path></svg>
                <h3>ULTRA SLOTS</h3>
                <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç 777. –°–æ–±–µ—Ä–∏ —Ç—Ä–∏ —Å–∏–º–≤–æ–ª–∞ –≤ —Ä—è–¥ –∏ —Å–æ—Ä–≤–∏ –¥–∂–µ–∫–ø–æ—Ç.</p>
            </div>

            <div class="game-card" onclick="openGame('blackjack')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="5" width="12" height="16" rx="2" transform="rotate(-10 3 5)" /><rect x="8" y="3" width="12" height="16" rx="2" /><text x="11" y="14" font-family="Arial" font-size="8" font-weight="bold" fill="currentColor">21</text></svg>
                <h3>PRO BLACKJACK</h3>
                <p>–ë–∏—Ç–≤–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–≤. –ù–∞–±–µ—Ä–∏ 21 –æ—á–∫–æ –∏ –æ–±—ã–≥—Ä–∞–π –¥–∏–ª–µ—Ä–∞ –≤ —á–µ—Å—Ç–Ω–æ–º –ø–æ–µ–¥–∏–Ω–∫–µ.</p>
            </div>

            <div class="game-card" onclick="openGame('roulette')">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M12 2v20M2 12h20"></path><circle cx="12" cy="12" r="3"></circle></svg>
                <h3>GRAND ROULETTE</h3>
                <p>–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –∫–ª–∞—Å—Å–∏–∫–∞. –î–µ–ª–∞–π —Å—Ç–∞–≤–∫–∏ –Ω–∞ –∑–µ—Ä–æ, —Ü–≤–µ—Ç –∏–ª–∏ —á–µ—Ç–Ω–æ—Å—Ç—å.</p>
            </div>

            <div class="game-card" onclick="openGame('dice')">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8" cy="8" r="1.5" fill="currentColor"></circle><circle cx="16" cy="16" r="1.5" fill="currentColor"></circle></svg>
                <h3>ORBITAL DICE</h3>
                <p>–ë—Ä–æ—Å–∞–π –∫–æ—Å—Ç–∏ –∏ –¥–æ–≤–µ—Ä—å—Å—è —Å—É–¥—å–±–µ. –£–≥–∞–¥–∞–π —Å—É–º–º—É –æ—á–∫–æ–≤ –∏ —É–º–Ω–æ–∂—å —Å—Ç–∞–≤–∫—É.</p>
            </div>

            <div class="game-card" onclick="openGame('scratch')">
                <svg viewBox="0 0 24 24"><path d="M20 7h-9m9 4h-9m9 4h-9M4 7h4v10H4z"></path></svg>
                <h3>SCRATCH LUCK</h3>
                <p>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ª–æ—Ç–µ—Ä–µ—è. –°–æ—Ç—Ä–∏ –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –∏ –Ω–∞–π–¥–∏ —Å–∫—Ä—ã—Ç–æ–µ –∑–æ–ª–æ—Ç–æ.</p>
            </div>

            <div class="game-card" onclick="openGame('shop')">
                <svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4H6z"></path><path d="M3 6h18M16 10a4 4 0 01-8 0"></path></svg>
                <h3>THE VAULT</h3>
                <p>–ú–∞–≥–∞–∑–∏–Ω —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö —Ç–µ–º. –°–¥–µ–ª–∞–π —Å–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –∑–æ–ª–æ—Ç—ã–º.</p>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 LUCKY SPIN CASINO SIMULATOR. DEFINITIVE EDITION V3.6</p>
            <span class="reset-btn" onclick="hardReset()">–°–ë–†–û–°–ò–¢–¨ –í–°–ï –î–ê–ù–ù–´–ï</span>
        </footer>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-ui"></div>
        </div>
    </div>

    <!-- –†–µ–∫–ª–∞–º–Ω—ã–π –±–ª–æ–∫ -->
    <div id="ad-wrapper">
        <h2 style="margin-bottom: 20px; letter-spacing: 3px;">–†–ï–ö–õ–ê–ú–ù–´–ô –ë–û–ù–£–°</h2>
        <video id="ad-video" playsinline><source src="ad_video.mp4" type="video/mp4"></video>
        <div id="ad-timer">–ó–ê–ì–†–£–ó–ö–ê...</div>
    </div>

    <div id="toast">–í–´–ò–ì–†–´–®!</div>

    <!-- 
       ================================================================
       JS ENGINE (LOGIC & INTERACTIVITY)
       ================================================================
    -->
    <script>
        /* 
           –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ê–£–î–ò–û –ò –ì–õ–û–ë–ê–õ–¨–ù–´–• –ü–ï–†–ï–ú–ï–ù–ù–´–•
        */
        let aCtx;
        function initAudio() { if (!aCtx) aCtx = new (window.AudioContext || window.webkitAudioContext)(); }

        const sfx = {
            click: () => playSfx(600, 'sine', 0.1),
            win: () => { 
                playSfx(523, 'square', 0.2); 
                setTimeout(()=>playSfx(659,'square',0.2), 100); 
                setTimeout(()=>playSfx(783,'square',0.4), 200); 
            },
            lose: () => {
                initAudio();
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.frequency.setValueAtTime(300, aCtx.currentTime);
                o.frequency.exponentialRampToValueAtTime(100, aCtx.currentTime + 0.5);
                g.gain.setValueAtTime(0.1, aCtx.currentTime);
                g.gain.linearRampToValueAtTime(0, aCtx.currentTime + 0.5);
                o.connect(g); g.connect(aCtx.destination);
                o.start(); o.stop(aCtx.currentTime + 0.5);
            },
            spin: () => playSfx(Math.random()*200+400, 'sine', 0.05),
            card: () => playSfx(450, 'triangle', 0.1)
        };

        function playSfx(f, type, d, v = 0.1) {
            initAudio();
            try {
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.type = type; o.frequency.value = f;
                g.gain.setValueAtTime(v, aCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.0001, aCtx.currentTime + d);
                o.connect(g); g.connect(aCtx.destination);
                o.start(); o.stop(aCtx.currentTime + d);
            } catch(e) {}
        }

        // –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫
        let musicPlaying = false;
        const bgMusic = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');

        function toggleMusic() {
            initAudio();
            if(musicPlaying) { bgMusic.pause(); musicBtn.innerText = 'üîá'; }
            else { bgMusic.play().catch(e => alert("–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —ç–∫—Ä–∞–Ω—É –µ—â–µ —Ä–∞–∑")); musicBtn.innerText = 'üîä'; }
            musicPlaying = !musicPlaying;
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (State Management)
        let state = {
            bal: 1000,
            lastDaily: 0,
            lastScratch: 0,
            unlocked: ['theme-default'],
            theme: 'theme-default',
            refClaimed: false,
            particles: true
        };

        function save() { localStorage.setItem('luckyspin_v3_6', JSON.stringify(state)); }
        function load() {
            const d = localStorage.getItem('luckyspin_v3_6');
            if(d) state = JSON.parse(d);
            updateBalance(0);
            applyTheme(state.theme);
            if(!state.particles) {
                document.getElementById('particle-canvas').style.opacity = '0';
                document.getElementById('fx-btn').innerText = 'üåë';
            }
        }

        function updateBalance(amt) {
            state.bal += amt;
            document.querySelectorAll('.bal-val-sync').forEach(el => el.innerText = Math.floor(state.bal));
            document.getElementById('balance-val').innerText = Math.floor(state.bal);
            const card = document.getElementById('bal-card');
            if(amt !== 0) {
                card.style.transform = 'scale(1.15) rotate(3deg)';
                setTimeout(()=>card.style.transform='scale(1)', 250);
            }
            if(amt > 0) { showToast(`+${amt} üí∞`); sfx.win(); confettiBurst(); }
            save();
        }

        function showToast(m) {
            const t = document.getElementById('toast');
            t.innerText = m; t.style.bottom = '60px';
            setTimeout(()=>t.style.bottom='-120px', 3000);
        }

        /* 
           CANVAS ENGINE (PARTICLES & CONFETTI)
        */
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let parts = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.onresize = resize; resize();

        class Particle {
            constructor() { this.init(); }
            init() {
                this.x = Math.random()*canvas.width;
                this.y = Math.random()*canvas.height;
                this.s = Math.random()*2 + 1;
                this.v = Math.random()*0.5 + 0.1;
                this.color = Math.random() > 0.5 ? getComputedStyle(document.body).getPropertyValue('--p').trim() : getComputedStyle(document.body).getPropertyValue('--c').trim();
            }
            update() {
                this.y -= this.v;
                if(this.y < -10) this.y = canvas.height + 10;
            }
            draw() {
                ctx.globalAlpha = 0.25;
                ctx.fillStyle = this.color;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, 7); ctx.fill();
            }
        }
        for(let i=0; i<80; i++) parts.push(new Particle());

        function toggleParticles() {
            state.particles = !state.particles;
            canvas.style.opacity = state.particles ? '1' : '0';
            document.getElementById('fx-btn').innerText = state.particles ? '‚ú®' : 'üåë';
            save();
        }

        function confettiBurst() {
            for(let i=0; i<60; i++) {
                parts.push({
                    x: canvas.width/2, y: canvas.height/3,
                    s: Math.random()*10+3, vx: (Math.random()-0.5)*25, vy: (Math.random()-0.5)*25,
                    life: 1, c: `hsl(${Math.random()*360}, 100%, 60%)`,
                    conf: true,
                    update() { this.x += this.vx; this.y += this.vy; this.vy += 0.5; this.life -= 0.012; },
                    draw() {
                        ctx.globalAlpha = this.life;
                        ctx.fillStyle = this.c;
                        ctx.fillRect(this.x, this.y, this.s, this.s);
                    }
                });
            }
        }

        function animate() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            if(state.particles || parts.some(p => p.conf)) {
                parts.forEach((p, i) => {
                    p.update(); p.draw();
                    if(p.conf && p.life <= 0) parts.splice(i, 1);
                });
            }
            requestAnimationFrame(animate);
        }
        animate();

        /* 
           MODAL & GAMES LOGIC
        */
        function openGame(g) {
            initAudio(); sfx.click();
            const modal = document.getElementById('modal');
            const ui = document.getElementById('modal-ui');
            modal.style.display = 'flex';
            ui.innerHTML = `<div class="modal-balance-display" style="background:rgba(255,204,0,0.1); border:1px solid var(--g); padding:10px 25px; border-radius:100px; color:var(--g); font-weight:900; margin-bottom:30px; display:inline-flex; align-items:center; gap:10px;">üí∞ –ë–ê–õ–ê–ù–°: <span class="bal-val-sync">${state.bal}</span></div><div id="game-content"></div>`;
            const content = document.getElementById('game-content');
            if(g === 'slots') initSlots(content);
            if(g === 'blackjack') initBJ(content);
            if(g === 'roulette') initRoulette(content);
            if(g === 'dice') initDice(content);
            if(g === 'scratch') initScratch(content);
            if(g === 'shop') initShop(content);
        }

        function closeModal() { document.getElementById('modal').style.display = 'none'; sfx.click(); bjActive = false; }

        // ULTRA SLOTS
        const SLOTS_ITEMS = ['üíé', 'üçã', 'üçí', 'üîî', 'üçá', '7Ô∏è‚É£'];
        function initSlots(target) {
            target.innerHTML = `<h2>ULTRA SLOTS</h2><div class="slot-frame"><div class="slot-box" id="s1">7Ô∏è‚É£</div><div class="slot-box" id="s2">7Ô∏è‚É£</div><div class="slot-box" id="s3">7Ô∏è‚É£</div></div><div style="margin:25px 0;">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50" style="background:#000; border:2px solid var(--g); color:var(--g); font-size:28px; font-weight:900; width:150px; text-align:center; padding:10px; border-radius:15px; outline:none;"></div><button class="btn-glam" id="spin-btn" onclick="playSlots()">–í–†–ê–©–ê–¢–¨</button>`;
        }
        function playSlots() {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return showToast("–ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –ú–û–ù–ï–¢!");
            updateBalance(-bet);
            const btn = document.getElementById('spin-btn');
            btn.disabled = true;
            let count = 0;
            const iv = setInterval(() => {
                sfx.spin();
                document.getElementById('s1').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                document.getElementById('s2').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                document.getElementById('s3').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                if(++count > 25) {
                    clearInterval(iv);
                    const r = [document.getElementById('s1').innerText, document.getElementById('s2').innerText, document.getElementById('s3').innerText];
                    if(r[0]===r[1] && r[1]===r[2]) { updateBalance(r[0]==='7Ô∏è‚É£' ? bet*50 : bet*15); }
                    else if(r[0]===r[1] || r[1]===r[2] || r[0]===r[2]) { updateBalance(bet*2); }
                    else { sfx.lose(); showToast("–ü–û–ü–†–û–ë–£–ô–¢–ï –°–ù–û–í–ê"); }
                    btn.disabled = false;
                }
            }, 80);
        }

        // PRO BLACKJACK
        let deck, pHand, dHand, bjBet, bjActive = false;
        function initBJ(target) {
            target.innerHTML = `<h2>PRO BLACKJACK</h2><div style="margin:20px 0;"><p style="opacity:0.5;">–î–ò–õ–ï–†: <span id="ds">0</span></p><div id="d-cards" class="card-area"></div><p style="opacity:0.5;">–í–´: <span id="ps">0</span></p><div id="p-cards" class="card-area"></div></div><div id="bj-controls">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="100" style="background:#000; border:2px solid var(--g); color:var(--g); font-size:24px; font-weight:900; width:120px; text-align:center; padding:8px; border-radius:12px; outline:none; margin-bottom:20px;"><br><button class="btn-glam" onclick="startBJ()">–†–ê–ó–î–ê–¢–¨</button></div>`;
        }
        function startBJ() {
            bjBet = parseInt(document.getElementById('bet-val').value);
            if(bjBet > state.bal || bjBet <= 0) return showToast("–°–¢–ê–í–ö–ê –ù–ï –ü–†–ò–ù–Ø–¢–ê");
            updateBalance(-bjBet);
            bjActive = true;
            deck = []; const suits = ['‚ô†','‚ô£','‚ô•','‚ô¶'], values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            for(let s of suits) for(let v of values) deck.push({v, s});
            deck.sort(() => Math.random()-0.5);
            pHand = [deck.pop(), deck.pop()]; dHand = [deck.pop()];
            renderBJ();
            if(getBJScore(pHand) === 21) { finalizeBJ('blackjack'); return; }
            document.getElementById('bj-controls').innerHTML = `<button class="btn-glam" id="bj-hit-btn" onclick="bjMove('hit')">–ï–©–ï</button><button class="btn-glam" id="bj-stand-btn" style="background:#333; margin-left:10px;" onclick="bjMove('stand')">–•–í–ê–¢–ò–¢</button>`;
        }
        function renderBJ() {
            const p = document.getElementById('p-cards'), d = document.getElementById('d-cards');
            p.innerHTML = ''; d.innerHTML = '';
            pHand.forEach(c => p.innerHTML += `<div class="p-card"><span>${c.v}</span><small>${c.s}</small></div>`);
            dHand.forEach(c => d.innerHTML += `<div class="p-card"><span>${c.v}</span><small>${c.s}</small></div>`);
            document.getElementById('ps').innerText = getBJScore(pHand);
            document.getElementById('ds').innerText = getBJScore(dHand);
            sfx.card();
        }
        function getBJScore(h) {
            let s = 0, aces = 0;
            h.forEach(c => { if(['J','Q','K'].includes(c.v)) s += 10; else if(c.v === 'A') { s += 11; aces++; } else s += parseInt(c.v); });
            while(s > 21 && aces > 0) { s -= 10; aces--; }
            return s;
        }
        function bjMove(move) {
            if(!bjActive) return;
            if(move === 'hit') {
                pHand.push(deck.pop()); renderBJ();
                if(getBJScore(pHand) > 21) { bjActive = false; finalizeBJ('lose'); }
            } else {
                bjActive = false;
                while(getBJScore(dHand) < 17) dHand.push(deck.pop());
                renderBJ();
                const ps = getBJScore(pHand), ds = getBJScore(dHand);
                if(ds > 21 || ps > ds) finalizeBJ('win'); else if(ps === ds) finalizeBJ('draw'); else finalizeBJ('lose');
            }
        }
        function finalizeBJ(res) {
            setTimeout(() => {
                if(res === 'blackjack') { updateBalance(bjBet * 2.5); showToast("BLACKJACK! x2.5"); }
                else if(res === 'win') { updateBalance(bjBet * 2); showToast("–ü–û–ë–ï–î–ê!"); }
                else if(res === 'draw') { updateBalance(bjBet); showToast("–ù–ò–ß–¨–Ø"); }
                else { sfx.lose(); showToast("–ü–†–û–ò–ì–†–´–®"); }
                setTimeout(() => { if(document.getElementById('modal').style.display === 'flex') openGame('blackjack'); }, 1500);
            }, 600);
        }

        // GRAND ROULETTE
        function initRoulette(target) {
            target.innerHTML = `<h2>GRAND ROULETTE</h2><div id="roulette-result" style="background:#111; width:120px; height:120px; border-radius:50%; margin:20px auto; display:flex; align-items:center; justify-content:center; font-size:40px; font-weight:900; border:5px solid var(--border);">?</div><div style="margin:20px 0;">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50" style="background:#000; border:2px solid var(--g); color:var(--g); font-size:24px; font-weight:900; width:120px; text-align:center; padding:8px; border-radius:12px; outline:none;"></div><div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"><button class="btn-glam" style="background:#e11d48" onclick="playRou('red')">RED</button><button class="btn-glam" style="background:#111; border:1px solid #444;" onclick="playRou('black')">BLACK</button><button class="btn-glam" style="background:#10b981; grid-column:span 2;" onclick="playRou('zero')">ZERO x35</button></div>`;
        }
        function playRou(pick) {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return showToast("–ú–ê–õ–û –ú–û–ù–ï–¢");
            updateBalance(-bet);
            let count = 0; const resBox = document.getElementById('roulette-result');
            const iv = setInterval(() => {
                sfx.spin(); resBox.innerText = Math.floor(Math.random()*37);
                if(++count > 30) {
                    clearInterval(iv); const num = Math.floor(Math.random()*37);
                    const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(num);
                    const color = num === 0 ? 'zero' : (isRed ? 'red' : 'black');
                    resBox.innerText = num; resBox.style.background = color === 'zero' ? '#10b981' : (color === 'red' ? '#e11d48' : '#111');
                    if(pick === color) updateBalance(color === 'zero' ? bet*35 : bet*2); else { sfx.lose(); showToast("–ù–ï –ü–û–í–ï–ó–õ–û"); }
                }
            }, 60);
        }

        // ORBITAL DICE
        function initDice(target) {
            target.innerHTML = `<h2>ORBITAL DICE</h2><div id="dice-res" style="font-size:80px; margin:30px;">üé≤ üé≤</div><div style="margin-bottom:20px;">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50" style="background:#000; border:2px solid var(--g); color:var(--g); font-size:24px; font-weight:900; width:120px; text-align:center; padding:8px; border-radius:12px; outline:none;"></div><div style="display:flex; gap:10px; justify-content:center;"><button class="btn-glam" onclick="playDice('even')">–ß–ï–¢</button><button class="btn-glam" onclick="playDice('odd')">–ù–ï–ß–ï–¢</button></div>`;
        }
        function playDice(pick) {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return;
            updateBalance(-bet);
            const d1 = Math.floor(Math.random()*6)+1, d2 = Math.floor(Math.random()*6)+1;
            const sum = d1 + d2; const icons = ['‚öÄ','‚öÅ','‚öÇ','‚öÉ','‚öÑ','‚öÖ'];
            document.getElementById('dice-res').innerText = `${icons[d1-1]} ${icons[d2-1]}`;
            const isEven = sum % 2 === 0;
            if((pick === 'even' && isEven) || (pick === 'odd' && !isEven)) updateBalance(bet*2); else { sfx.lose(); showToast("–ü–†–û–ò–ì–†–´–®"); }
        }

        // SCRATCH LUCK
        let scratchClaimed = false;
        function initScratch(target) {
            const now = Date.now();
            if(now - state.lastScratch < 3600000) {
                const diff = Math.ceil((3600000 - (now - state.lastScratch))/60000);
                target.innerHTML = `<h2>SCRATCH LUCK</h2><p style="margin:30px 0; color:#ff4444;">–î–û–°–¢–£–ü–ù–û –ß–ï–†–ï–ó ${diff} –ú–ò–ù.</p><button class="btn-glam" onclick="closeModal()">OK</button>`;
                return;
            }
            target.innerHTML = `<h2>SCRATCH LUCK</h2><p style="margin-bottom:15px; opacity:0.6;">–°–æ—Ç—Ä–∏ 80% —Å–ª–æ—è</p><div style="position:relative; width:300px; height:150px; margin:0 auto;"><canvas id="scratch-canvas" width="300" height="150" style="position:absolute; top:0; left:0; z-index:2; cursor:crosshair;"></canvas><div style="position:absolute; top:0; left:0; width:300px; height:150px; background:#111; color:#ffcc00; display:flex; align-items:center; justify-content:center; font-size:32px; font-weight:bold; border-radius:15px; z-index:1; border:2px solid var(--border);">üí∞ 1000</div></div>`;
            const canv = document.getElementById('scratch-canvas'), c = canv.getContext('2d');
            c.fillStyle = '#666'; c.beginPath(); c.roundRect(0,0,300,150,15); c.fill();
            const handleScratch = (e) => {
                const r = canv.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - r.left;
                const y = (e.clientY || e.touches[0].clientY) - r.top;
                c.globalCompositeOperation = 'destination-out'; c.beginPath(); c.arc(x, y, 20, 0, 7); c.fill();
                const data = c.getImageData(0,0,300,150).data; let cleared = 0;
                for(let i=3; i<data.length; i+=4) if(data[i] === 0) cleared++;
                if(cleared > 35000 && !scratchClaimed) {
                    scratchClaimed = true; state.lastScratch = Date.now(); updateBalance(1000);
                    setTimeout(() => { scratchClaimed = false; closeModal(); }, 1500);
                }
            };
            canv.ontouchmove = (e) => { handleScratch(e); e.preventDefault(); };
            canv.onmousemove = (e) => { if(e.buttons === 1) handleScratch(e); };
        }

        // THE VAULT (SHOP)
        function initShop(target) {
            const themes = [
                {id: 'theme-default', name: 'NEON BLUE', price: 0},
                {id: 'theme-emerald', name: 'EMERALD LUX', price: 5000},
                {id: 'theme-ruby', name: 'RUBY NIGHT', price: 15000},
                {id: 'theme-gold', name: 'PURE GOLD', price: 50000}
            ];
            target.innerHTML = `<h2>THE VAULT</h2><p style="margin-bottom:20px; opacity:0.5;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</p>`;
            themes.forEach(t => {
                const owned = state.unlocked.includes(t.id);
                target.innerHTML += `<div style="display:flex; justify-content:space-between; align-items:center; padding:15px; background:var(--surface); border-radius:20px; margin-bottom:10px; border: 1px solid var(--border);"><span style="font-weight:700;">${t.name}</span><button class="btn-glam" style="padding:10px 20px; font-size:12px;" onclick="buyTheme('${t.id}', ${t.price})">${owned ? (state.theme === t.id ? '–ê–ö–¢–ò–í–ù–û' : '–í–´–ë–†–ê–¢–¨') : t.price + ' üí∞'}</button></div>`;
            });
        }
        function buyTheme(id, p) {
            if(state.unlocked.includes(id)) { state.theme = id; applyTheme(id); openGame('shop'); }
            else if(state.bal >= p) { updateBalance(-p); state.unlocked.push(id); state.theme = id; applyTheme(id); openGame('shop'); }
            else showToast("–ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –°–†–ï–î–°–¢–í");
        }
        function applyTheme(id) { document.body.className = id; save(); }

        /* 
           ADDITIONAL UTILITIES
        */
        function spinDaily() {
            const now = Date.now();
            if(now - state.lastDaily < 86400000) return showToast("–ü–†–ò–•–û–î–ò–¢–ï –ó–ê–í–¢–†–ê");
            const wheel = document.getElementById('main-wheel');
            const deg = 1800 + Math.random()*1800;
            wheel.style.transform = `rotate(${deg}deg)`;
            document.getElementById('daily-btn').disabled = true;
            state.lastDaily = now; save();
            setTimeout(()=> { updateBalance(500); updateTimer(); }, 5000);
        }

        function updateTimer() {
            const left = 86400000 - (Date.now() - state.lastDaily);
            const timerEl = document.getElementById('timer');
            if(left > 0 && timerEl) {
                const h = Math.floor(left/3600000), m = Math.floor((left%3600000)/60000);
                timerEl.innerText = `–°–õ–ï–î–£–Æ–©–ò–ô –ß–ï–†–ï–ó: ${h}–ß. ${m}–ú.`;
                document.getElementById('daily-btn').disabled = true;
            } else if(timerEl) {
                timerEl.innerText = "–ë–û–ù–£–° –ì–û–¢–û–í!";
                document.getElementById('daily-btn').disabled = false;
            }
        }

        function startVideoAd() {
            const wrapper = document.getElementById('ad-wrapper');
            const video = document.getElementById('ad-video');
            const timer = document.getElementById('ad-timer');
            wrapper.style.display = 'flex'; video.currentTime = 0;
            video.play().catch(() => { alert("–û—à–∏–±–∫–∞ —Ä–µ–∫–ª–∞–º—ã"); wrapper.style.display = 'none'; });
            const upd = setInterval(() => { timer.innerText = `–û–°–¢–ê–õ–û–°–¨: ${Math.ceil(video.duration - video.currentTime)} –°–ï–ö.`; }, 500);
            video.onended = () => { clearInterval(upd); wrapper.style.display = 'none'; updateBalance(250); };
        }

        function claimReferral() {
            if(state.refClaimed) return alert("–ë–æ–Ω—É—Å —É–∂–µ –ø–æ–ª—É—á–µ–Ω!");
            if(document.getElementById('friend-code').value.length > 4) {
                state.refClaimed = true; updateBalance(500); save();
                alert("–ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +500 –º–æ–Ω–µ—Ç.");
            }
        }

        function scrollToGrid() { document.getElementById('game-grid').scrollIntoView({behavior:'smooth'}); }
        function hardReset() { if(confirm("–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ?")) { localStorage.clear(); location.reload(); } }

        window.onload = () => {
            load();
            setInterval(updateTimer, 30000);
            updateTimer();
        };

        document.body.addEventListener('click', () => initAudio(), {once: true});
    </script>
</body>
</html>
