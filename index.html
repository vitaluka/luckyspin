<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LuckySpin Grand Luxury | The Definitive Edition</title>
    
    <!-- 
        ================================================================
        –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –í–ù–ï–®–ù–ò–• –®–†–ò–§–¢–û–í
        Montserrat –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, Playfair –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±—Ä–µ–Ω–¥–∞.
        ================================================================
    -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        /* 
           ================================================================
           1. –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –¶–í–ï–¢–û–í–´–ï –°–•–ï–ú–´
           –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Å–º–µ–Ω—ã —Ç–µ–º —á–µ—Ä–µ–∑ –º–∞–≥–∞–∑–∏–Ω.
           ================================================================
        */
        :root {
            --p: #ff00ff; /* Neon Pink */
            --c: #00f2ff; /* Neon Cyan */
            --g: #ffcc00; /* Gold */
            --b: #050508; /* Deep Background */
            --surface: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --grad: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --shadow: 0 0 20px rgba(255, 0, 255, 0.3);
            --glass: rgba(255, 255, 255, 0.03);
            --transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* 
           ================================================================
           –¢–ï–ú–´ –û–§–û–†–ú–õ–ï–ù–ò–Ø (THE VAULT)
           ================================================================
        */
        body.theme-emerald { 
            --p: #10b981; 
            --c: #34d399; 
            --grad: linear-gradient(135deg, #064e3b, #065f46); 
        }
        body.theme-ruby { 
            --p: #e11d48; 
            --c: #fb7185; 
            --grad: linear-gradient(135deg, #4c0519, #881337); 
        }
        body.theme-gold { 
            --p: #ffcc00; 
            --c: #ffffff; 
            --grad: linear-gradient(135deg, #434343, #000000); 
        }

        /* 
           ================================================================
           2. –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –°–¢–†–ê–ù–ò–¶–´
           ================================================================
        */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Montserrat', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            -webkit-user-select: none;
            user-select: none;
        }
        
        body {
            background: var(--b);
            background-image: var(--grad);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            background-attachment: fixed;
            overscroll-behavior-y: contain; /* –ó–∞–ø—Ä–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤–∞–π–ø–æ–º */
        }

        canvas#particle-canvas {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            z-index: -1; 
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 0 20px; 
        }

        /* 
           ================================================================
           3. –®–ê–ü–ö–ê (HEADER)
           –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É.
           ================================================================
        */
        header {
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(25px);
            padding: 15px 5%;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            border-bottom: 2px solid var(--p);
            position: sticky; 
            top: 0; 
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: 26px; 
            font-weight: 900; 
            letter-spacing: 2px;
            background: linear-gradient(to right, #fff, var(--g));
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .balance-pill {
            background: var(--surface);
            border: 2px solid var(--g);
            padding: 8px 22px;
            border-radius: 100px;
            display: flex; 
            align-items: center; 
            gap: 12px;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.2);
            transition: var(--transition);
        }
        
        #balance-val { 
            font-weight: 900; 
            color: var(--g); 
            font-size: 22px; 
        }

        /* 
           ================================================================
           4. –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø (–ê–£–î–ò–û / FX)
           ================================================================
        */
        .controls-wrapper {
            position: fixed; 
            bottom: 25px; 
            right: 25px;
            display: flex; 
            flex-direction: column; 
            gap: 15px;
            z-index: 1001;
        }

        .ctrl-btn {
            background: rgba(0,0,0,0.6); 
            border: 1px solid var(--border);
            padding: 12px; 
            border-radius: 50%; 
            width: 55px; 
            height: 55px;
            display: flex; 
            align-items: center; 
            justify-content: center;
            cursor: pointer; 
            backdrop-filter: blur(15px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: var(--transition);
            font-size: 20px;
        }
        
        .ctrl-btn:hover { 
            transform: scale(1.1); 
            border-color: var(--p); 
        }

        /* 
           ================================================================
           5. –ì–ï–†–û–ô-–ë–õ–û–ö (HERO SECTION)
           ================================================================
        */
        .hero {
            display: grid; 
            grid-template-columns: 1.1fr 0.9fr;
            gap: 60px; 
            padding: 100px 0; 
            align-items: center;
        }

        .hero-info h1 {
            font-size: 68px; 
            font-weight: 900; 
            line-height: 1;
            margin-bottom: 30px; 
            text-transform: uppercase;
        }
        
        .hero-info span { 
            color: var(--p); 
            text-shadow: 0 0 25px var(--p); 
        }

        .daily-section {
            background: var(--surface); 
            border: 1px solid var(--border);
            padding: 60px; 
            border-radius: 60px; 
            text-align: center;
            backdrop-filter: blur(20px); 
            position: relative;
            box-shadow: inset 0 0 50px rgba(255,255,255,0.02);
        }

        .wheel-outer {
            width: 340px; 
            height: 340px; 
            margin: 0 auto 40px;
            border: 12px solid var(--g); 
            border-radius: 50%;
            position: relative; 
            overflow: hidden;
            background: conic-gradient(
                #111 0deg 45deg, var(--p) 45deg 90deg, 
                #222 90deg 135deg, var(--c) 135deg 180deg,
                #111 180deg 225deg, var(--p) 225deg 270deg,
                #222 270deg 315deg, var(--c) 315deg 360deg
            );
            transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.7);
        }
        
        .wheel-pointer {
            position: absolute; 
            top: -15px; 
            left: 50%;
            transform: translateX(-50%); 
            z-index: 10;
            width: 0; 
            height: 0; 
            border-left: 25px solid transparent;
            border-right: 25px solid transparent; 
            border-top: 40px solid var(--g);
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5));
        }

        /* 
           ================================================================
           6. –ö–ù–û–ü–ö–ò –ò UI –≠–õ–ï–ú–ï–ù–¢–´
           ================================================================
        */
        .btn-glam {
            background: linear-gradient(45deg, var(--p), var(--c));
            color: white; 
            border: none; 
            padding: 22px 55px;
            border-radius: 100px; 
            font-weight: 900; 
            font-size: 16px;
            cursor: pointer; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            transition: var(--transition);
            position: relative; 
            overflow: hidden;
        }
        
        .btn-glam::before {
            content: ''; 
            position: absolute; 
            top: -50%; 
            left: -50%; 
            width: 200%; 
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg); 
            transition: 0.6s;
        }
        
        .btn-glam:hover::before { 
            left: 100%; 
        }
        
        .btn-glam:hover:not(:disabled) { 
            transform: translateY(-7px) scale(1.05); 
            box-shadow: 0 0 40px var(--p); 
        }
        
        .btn-glam:disabled { 
            background: #222; 
            color: #555; 
            cursor: not-allowed; 
            transform: scale(0.98); 
        }

        /* 
           ================================================================
           7. –ò–ì–†–û–í–ê–Ø –°–ï–¢–ö–ê (GAMES GRID)
           ================================================================
        */
        .grid-title {
            margin: 80px 0 40px; 
            font-size: 36px; 
            font-weight: 900;
            display: flex; 
            align-items: center; 
            gap: 25px; 
            text-transform: uppercase;
            letter-spacing: 4px;
        }
        
        .grid-title::after { 
            content: ''; 
            height: 3px; 
            flex: 1; 
            background: linear-gradient(to right, var(--p), transparent); 
        }

        .games-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 35px; 
            margin-bottom: 120px;
        }

        .game-card {
            background: var(--surface); 
            border: 1px solid var(--border);
            border-radius: 45px; 
            padding: 60px 35px; 
            text-align: center;
            transition: 0.5s cubic-bezier(0.075, 0.82, 0.165, 1); 
            cursor: pointer;
            position: relative; 
            overflow: hidden;
        }
        
        .game-card:hover { 
            transform: translateY(-20px); 
            border-color: var(--p); 
            background: rgba(255,255,255,0.07); 
        }
        
        .game-card svg {
            width: 85px; 
            height: 85px; 
            margin-bottom: 35px;
            stroke: var(--c); 
            fill: none; 
            stroke-width: 1.5;
            filter: drop-shadow(0 0 20px var(--c));
        }
        
        .game-card h3 { 
            font-size: 28px; 
            font-weight: 900; 
            margin-bottom: 15px; 
            letter-spacing: 1px; 
        }
        
        .game-card p { 
            opacity: 0.6; 
            font-size: 15px; 
            line-height: 1.7; 
        }

        .referral-box {
            background: rgba(0,0,0,0.3); 
            border: 1px dashed var(--g);
            padding: 35px; 
            border-radius: 35px; 
            margin-top: 45px;
            backdrop-filter: blur(10px);
        }
        
        .ref-input {
            background: rgba(0,0,0,0.6); 
            border: 1px solid var(--border);
            padding: 12px 25px; 
            border-radius: 12px; 
            color: white;
            text-align: center; 
            font-size: 20px; 
            margin: 20px 0; 
            width: 100%;
            max-width: 300px; 
            outline: none; 
            transition: 0.3s;
        }
        
        .ref-input:focus { 
            border-color: var(--g); 
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.2); 
        }

        /* 
           ================================================================
           8. –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –ò –í–ò–î–ï–û
           ================================================================
        */
        .modal {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: rgba(0,0,0,0.98); 
            z-index: 2000;
            backdrop-filter: blur(30px); 
            justify-content: center; 
            align-items: center;
            padding: 15px;
        }
        
        .modal-content {
            background: #08080a; 
            width: 95%; 
            max-width: 800px; 
            padding: 70px 40px;
            border-radius: 60px; 
            border: 2px solid var(--p); 
            position: relative;
            text-align: center; 
            box-shadow: 0 0 120px rgba(255, 0, 255, 0.15);
            max-height: 95vh; 
            overflow-y: auto;
        }
        
        .close-modal { 
            position: absolute; 
            top: 35px; 
            right: 45px; 
            font-size: 50px; 
            cursor: pointer; 
            opacity: 0.4; 
            transition: 0.3s; 
        }
        
        .close-modal:hover { 
            opacity: 1; 
            color: var(--p); 
        }

        .modal-balance-display {
            background: rgba(255, 204, 0, 0.1); 
            border: 1px solid var(--g);
            display: inline-flex; 
            align-items: center; 
            gap: 12px;
            padding: 10px 25px; 
            border-radius: 100px;
            color: var(--g); 
            font-weight: 900; 
            margin-bottom: 30px;
        }

        #ad-wrapper {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: #000; 
            z-index: 3000; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
        }
        
        #ad-video { 
            width: 90%; 
            max-width: 900px; 
            border-radius: 25px; 
            border: 2px solid var(--p); 
        }
        
        #ad-timer { 
            margin-top: 25px; 
            font-size: 28px; 
            color: var(--g); 
            font-weight: 900; 
            letter-spacing: 2px; 
        }

        /* 
           ================================================================
           9. –ò–ì–†–û–í–ê–Ø –õ–û–ì–ò–ö–ê - –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´
           ================================================================
        */
        .bet-input-area {
            margin: 30px 0; 
            background: rgba(255,255,255,0.04);
            padding: 25px; 
            border-radius: 25px; 
            border: 1px solid var(--border);
        }
        
        .bet-input-area input {
            background: #000; 
            border: 2px solid var(--g); 
            color: var(--g);
            font-size: 32px; 
            font-weight: 900; 
            width: 180px; 
            text-align: center;
            padding: 12px; 
            border-radius: 15px; 
            outline: none; 
            margin-left: 15px;
        }

        .slot-frame {
            display: flex; 
            gap: 25px; 
            justify-content: center; 
            margin: 45px 0;
            background: #000; 
            padding: 40px; 
            border-radius: 40px; 
            border: 3px solid var(--border);
            flex-wrap: wrap;
        }
        
        .slot-box {
            width: 130px; 
            height: 180px; 
            background: linear-gradient(to bottom, #111, #050505);
            border-radius: 25px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 80px; 
            border: 1px solid rgba(255,255,255,0.1);
            text-shadow: 0 0 25px var(--c);
        }

        .card-area { 
            display: flex; 
            justify-content: center; 
            gap: 18px; 
            min-height: 160px; 
            margin: 25px 0; 
            flex-wrap: wrap; 
        }
        
        .p-card {
            width: 100px; 
            height: 145px; 
            background: white; 
            color: black;
            border-radius: 15px; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            font-weight: 900;
            font-size: 32px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            animation: cardSlide 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes cardSlide { 
            from { transform: translateY(120px) rotate(10deg); opacity: 0; } 
        }

        #roulette-result {
            width: 160px; 
            height: 160px; 
            border-radius: 50%; 
            margin: 30px auto;
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 60px; 
            font-weight: 900; 
            border: 8px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 50px rgba(0,0,0,0.5); 
            transition: 0.3s;
        }

        #toast {
            position: fixed; 
            bottom: -120px; 
            left: 50%; 
            transform: translateX(-50%);
            background: white; 
            color: black; 
            padding: 25px 70px;
            border-radius: 100px; 
            font-weight: 900; 
            font-size: 24px;
            z-index: 9999; 
            transition: 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        footer { 
            text-align: center; 
            padding: 120px 0; 
            opacity: 0.4; 
            font-size: 14px; 
            letter-spacing: 1px; 
        }
        
        .reset-btn { 
            color: #ff4444; 
            cursor: pointer; 
            text-decoration: underline; 
            font-weight: bold; 
            margin-top: 20px; 
            display: inline-block; 
        }

        /* 
           ================================================================
           10. –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ú–û–ë–ò–õ–¨–ù–ê–Ø –ê–î–ê–ü–¢–ê–¶–ò–Ø (MOBILE FIXES)
           –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –Ω–∞ –ü–ö –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–º –∂–µ, –Ω–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö –≤—Å—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.
           ================================================================
        */
        @media (max-width: 768px) {
            header { 
                padding: 10px 4%; 
                height: 70px;
            }
            
            .brand { 
                font-size: 20px; 
                letter-spacing: 1px;
            }
            
            .balance-pill { 
                padding: 6px 14px; 
                gap: 8px;
            }
            
            #balance-val { 
                font-size: 16px; 
            }

            .hero { 
                grid-template-columns: 1fr; 
                text-align: center; 
                padding: 30px 0; 
                gap: 30px; 
            }
            
            .hero-info h1 { 
                font-size: 36px; 
                line-height: 1.1;
            }
            
            .hero-info p {
                font-size: 16px !important;
                margin-bottom: 30px !important;
            }
            
            .daily-section { 
                padding: 30px 15px; 
                border-radius: 35px; 
            }
            
            .wheel-outer { 
                width: 280px; 
                height: 280px; 
                margin-bottom: 25px;
            }
            
            .wheel-pointer {
                top: -10px;
                border-left-width: 15px;
                border-right-width: 15px;
                border-top-width: 25px;
            }

            .modal-content { 
                padding: 40px 15px; 
                border-radius: 35px; 
                width: 100%;
                max-height: 98vh;
            }
            
            .close-modal { 
                top: 15px; 
                right: 20px; 
                font-size: 35px; 
            }
            
            .modal-balance-display {
                margin-bottom: 15px;
                padding: 8px 15px;
                font-size: 14px;
            }

            .slot-frame {
                padding: 15px;
                gap: 10px;
                margin: 20px 0;
            }
            
            .slot-box { 
                width: 80px; 
                height: 110px; 
                font-size: 45px; 
                border-radius: 15px;
            }
            
            .p-card { 
                width: 70px; 
                height: 100px; 
                font-size: 22px; 
                border-radius: 10px;
            }
            
            .card-area {
                min-height: 110px;
                gap: 10px;
            }
            
            .bet-input-area {
                padding: 15px;
                margin: 15px 0;
            }
            
            .bet-input-area input { 
                font-size: 22px; 
                width: 100px; 
                padding: 8px;
            }
            
            .btn-glam {
                padding: 16px 30px;
                font-size: 14px;
            }
            
            .grid-title { 
                font-size: 22px; 
                margin: 40px 0 20px;
            }
            
            .game-card { 
                padding: 35px 20px; 
                border-radius: 30px; 
            }
            
            .game-card svg {
                width: 60px;
                height: 60px;
                margin-bottom: 20px;
            }
            
            .game-card h3 {
                font-size: 22px;
            }
            
            .referral-box {
                padding: 20px;
                border-radius: 25px;
            }
            
            .controls-wrapper {
                bottom: 15px;
                right: 15px;
                gap: 10px;
            }
            
            .ctrl-btn {
                width: 45px;
                height: 45px;
                font-size: 16px;
            }
            
            #toast {
                padding: 15px 40px;
                font-size: 18px;
                width: 80%;
                text-align: center;
            }
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–∞–º—ã—Ö –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ (iPhone SE –∏ —Ç.–¥.) */
        @media (max-width: 380px) {
            .wheel-outer {
                width: 240px;
                height: 240px;
            }
            
            .slot-box {
                width: 70px;
                height: 95px;
                font-size: 36px;
            }
            
            .p-card {
                width: 60px;
                height: 85px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body class="theme-default">

    <!-- 
        ================================================================
        –§–û–ù–û–í–´–ô CANVAS –î–õ–Ø –ß–ê–°–¢–ò–¶
        ================================================================
    -->
    <canvas id="particle-canvas"></canvas>

    <!-- 
        ================================================================
        –®–ê–ü–ö–ê –°–ê–ô–¢–ê
        ================================================================
    -->
    <header>
        <div class="brand">LUCKY SPIN</div>
        <div class="balance-pill" id="bal-card">
            <span style="font-size: 24px;">üí∞</span>
            <span id="balance-val">1000</span>
        </div>
    </header>

    <!-- 
        ================================================================
        –ê–£–î–ò–û –†–ï–°–£–†–°–´ –ò –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø
        ================================================================
    -->
    <audio id="bg-music" loop preload="auto">
        <source src="bg_music.mp3" type="audio/mpeg">
    </audio>

    <div class="controls-wrapper">
        <div class="ctrl-btn" onclick="toggleParticles()" id="fx-btn" title="–í–∫–ª/–í—ã–∫–ª —á–∞—Å—Ç–∏—Ü—ã">‚ú®</div>
        <div class="ctrl-btn" onclick="toggleMusic()" id="music-btn" title="–í–∫–ª/–í—ã–∫–ª –º—É–∑—ã–∫—É">üîá</div>
    </div>

    <!-- 
        ================================================================
        –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢
        ================================================================
    -->
    <main class="container">
        
        <!-- –°–µ–∫—Ü–∏—è Hero —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –∫–æ–ª–µ—Å–æ–º -->
        <section class="hero">
            <div class="hero-info">
                <h1>FORTUNE<br><span>FAVORS</span> THE BOLD</h1>
                <p style="font-size: 18px; opacity: 0.7; margin-bottom: 45px; line-height: 1.6;">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —ç–ª–∏—Ç–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä. –ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É –≤ —Å–∞–º—ã—Ö –∞–∑–∞—Ä—Ç–Ω—ã—Ö –∏–≥—Ä–∞—Ö –º–∏—Ä–∞. 
                    –¢–≤–æ–π –ø—É—Ç—å –∫ –¥–∂–µ–∫–ø–æ—Ç—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ–¥–Ω–æ–≥–æ –≤—Ä–∞—â–µ–Ω–∏—è.
                </p>
                <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                    <button class="btn-glam" onclick="scrollToGrid()">–í –ò–ì–†–û–í–û–ô –ó–ê–õ</button>
                    <button class="btn-glam" style="background: var(--surface); border: 1px solid var(--border);" onclick="startVideoAd()">–†–ï–ö–õ–ê–ú–ê (+250 üí∞)</button>
                </div>
                
                <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫ -->
                <div class="referral-box">
                    <p style="font-weight: 700; color: var(--g);">–¢–í–û–ô ID –ü–ê–†–¢–ù–ï–†–ê: <span id="my-ref-code">LS-77201</span></p>
                    <input type="text" id="friend-code" class="ref-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥—Ä—É–≥–∞">
                    <br>
                    <button class="btn-glam" style="padding: 12px 35px; font-size: 13px;" onclick="claimReferral()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ (+500)</button>
                </div>
            </div>
            
            <!-- –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã -->
            <div class="daily-section">
                <div class="wheel-pointer"></div>
                <div class="wheel-outer" id="main-wheel"></div>
                <button class="btn-glam" id="daily-btn" onclick="spinDaily()">–ö–†–£–¢–ò–¢–¨ –ë–ï–°–ü–õ–ê–¢–ù–û</button>
                <p id="timer" style="margin-top: 25px; font-size: 14px; opacity: 0.6; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;"></p>
            </div>
        </section>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ—Ç–∫–∏ –∏–≥—Ä -->
        <div class="grid-title">PREMIUM GAMES</div>

        <!-- –°–µ—Ç–∫–∞ –∏–≥—Ä–æ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –∏ —Ä–µ–∂–∏–º–æ–≤ -->
        <div class="games-grid" id="game-grid">
            
            <!-- Slots -->
            <div class="game-card" onclick="openGame('slots')">
                <svg viewBox="0 0 24 24"><path d="M19 5H5a2 2 0 00-2 2v10a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2zM7 5v14M12 5v14M17 5v14M2 12h20"></path></svg>
                <h3>ULTRA SLOTS</h3>
                <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–∂–µ–∫–ø–æ—Ç 777. –°–æ–±–µ—Ä–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∏–∑ —Ç—Ä–µ—Ö —Å–µ–º–µ—Ä–æ–∫ –∏ —Å–æ—Ä–≤–∏ –∫—É—à.</p>
            </div>

            <!-- Blackjack -->
            <div class="game-card" onclick="openGame('blackjack')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="5" width="12" height="16" rx="2" transform="rotate(-10 3 5)" />
                    <rect x="8" y="3" width="12" height="16" rx="2" />
                    <text x="11" y="14" font-family="Arial" font-size="8" font-weight="bold" fill="currentColor">21</text>
                </svg>
                <h3>PRO BLACKJACK</h3>
                <p>–ò—Å–ø—ã—Ç–∞–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ –±–∏—Ç–≤–µ –ø—Ä–æ—Ç–∏–≤ –¥–∏–ª–µ—Ä–∞. –ù–∞–±–µ—Ä–∏ 21 –∏ —É–¥–≤–æ–π —Å–≤–æ—é —Å—Ç–∞–≤–∫—É.</p>
            </div>

            <!-- Roulette -->
            <div class="game-card" onclick="openGame('roulette')">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M12 2v20M2 12h20"></path><circle cx="12" cy="12" r="3"></circle></svg>
                <h3>GRAND ROULETTE</h3>
                <p>–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è —Ä—É–ª–µ—Ç–∫–∞. –°—Ç–∞–≤—å –Ω–∞ —Ü–≤–µ—Ç –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è.</p>
            </div>

            <!-- Dice -->
            <div class="game-card" onclick="openGame('dice')">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8" cy="8" r="1.5" fill="currentColor"></circle><circle cx="16" cy="16" r="1.5" fill="currentColor"></circle></svg>
                <h3>ORBITAL DICE</h3>
                <p>–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é. –£–≥–∞–¥–∞–π —Å—É–º–º—É –æ—á–∫–æ–≤ –Ω–∞ –∫–æ—Å—Ç—è—Ö –∏ –∑–∞–±–µ—Ä–∏ –Ω–∞–≥—Ä–∞–¥—É.</p>
            </div>

            <!-- Scratch -->
            <div class="game-card" onclick="openGame('scratch')">
                <svg viewBox="0 0 24 24"><path d="M20 7h-9m9 4h-9m9 4h-9M4 7h4v10H4z"></path></svg>
                <h3>SCRATCH LUCK</h3>
                <p>–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–æ—Ç–µ—Ä–µ—è. –°–æ—Ç—Ä–∏ –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –∏ –Ω–∞–π–¥–∏ —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã–π –ø—Ä–∏–∑ –≤–Ω—É—Ç—Ä–∏.</p>
            </div>

            <!-- Shop -->
            <div class="game-card" onclick="openGame('shop')">
                <svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4H6z"></path><path d="M3 6h18M16 10a4 4 0 01-8 0"></path></svg>
                <h3>THE VAULT</h3>
                <p>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–≤–æ–π –æ–ø—ã—Ç. –¢—Ä–∞—Ç—å –º–æ–Ω–µ—Ç—ã –Ω–∞ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã.</p>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä —Å–∞–π—Ç–∞ -->
        <footer>
            <p>&copy; 2025 LUCKY SPIN CASINO SIMULATOR. DEFINITIVE EDITION V3.5</p>
            <div class="danger-zone">
                <span class="reset-btn" onclick="hardReset()">–°–ë–†–û–°–ò–¢–¨ –í–ï–°–¨ –ü–†–û–ì–†–ï–°–° –ò –ü–ê–ú–Ø–¢–¨</span>
            </div>
        </footer>
    </main>

    <!-- 
        ================================================================
        –í–ò–î–ï–û –ü–õ–ï–ï–† –î–õ–Ø –†–ï–ö–õ–ê–ú–´
        ================================================================
    -->
    <div id="ad-wrapper">
        <h2 style="margin-bottom: 25px; letter-spacing: 5px;">–†–ï–ö–õ–ê–ú–ù–´–ô –ë–û–ù–£–°</h2>
        <video id="ad-video" playsinline>
            <source src="ad_video.mp4" type="video/mp4">
        </video>
        <div id="ad-timer">–ó–ê–ì–†–£–ó–ö–ê...</div>
        <p style="margin-top: 15px; opacity: 0.6;">–î–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ –∫–æ–Ω—Ü–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å 250 –º–æ–Ω–µ—Ç</p>
    </div>

    <!-- 
        ================================================================
        –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ò–ì–†–´
        ================================================================
    -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-ui"></div>
        </div>
    </div>

    <!-- 
        ================================================================
        –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô (TOAST)
        ================================================================
    -->
    <div id="toast">–í–´–ò–ì–†–´–®!</div>

    <!-- 
        ================================================================
        JS ENGINE: –õ–û–ì–ò–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        ================================================================
    -->
    <script>
        /**
         * Luckyspin Game Engine V3.5
         * –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏–≥—Ä, —Å–∏—Å—Ç–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã.
         */

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
        let aCtx;
        function initAudio() {
            if (!aCtx) {
                aCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        /**
         * –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–∏–Ω—Ç–µ–∑ (Oscillator)
         * @param {number} f - –ß–∞—Å—Ç–æ—Ç–∞ –∑–≤—É–∫–∞
         * @param {string} type - –¢–∏–ø –≤–æ–ª–Ω—ã (sine, square, triangle, sawtooth)
         * @param {number} d - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
         * @param {number} v - –ì—Ä–æ–º–∫–æ—Å—Ç—å
         */
        function playSfx(f, type, d, v = 0.1) {
            initAudio();
            try {
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.type = type; 
                o.frequency.value = f;
                g.gain.setValueAtTime(v, aCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.0001, aCtx.currentTime + d);
                o.connect(g); 
                g.connect(aCtx.destination);
                o.start(); 
                o.stop(aCtx.currentTime + d);
            } catch(e) { 
                console.warn("Audio blocked by browser policy"); 
            }
        }

        // –ö–æ–ª–ª–µ–∫—Ü–∏—è –∑–≤—É–∫–æ–≤—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤
        const sfx = {
            click: () => playSfx(600, 'sine', 0.1),
            win: () => { 
                playSfx(523, 'square', 0.2); 
                setTimeout(()=>playSfx(659,'square',0.2), 100); 
                setTimeout(()=>playSfx(783,'square',0.4), 200); 
            },
            lose: () => {
                if(!aCtx) return;
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.frequency.setValueAtTime(300, aCtx.currentTime);
                o.frequency.exponentialRampToValueAtTime(100, aCtx.currentTime + 0.5);
                g.gain.setValueAtTime(0.1, aCtx.currentTime);
                g.gain.linearRampToValueAtTime(0, aCtx.currentTime + 0.5);
                o.connect(g); 
                g.connect(aCtx.destination);
                o.start(); 
                o.stop(aCtx.currentTime + 0.5);
            },
            spin: () => playSfx(Math.random()*200+400, 'sine', 0.05),
            card: () => playSfx(450, 'triangle', 0.1)
        };

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–æ–π
        let musicPlaying = false;
        const bgMusic = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');

        function toggleMusic() {
            initAudio();
            if(musicPlaying) {
                bgMusic.pause();
                musicBtn.innerText = 'üîá';
            } else {
                bgMusic.play().catch(e => {
                    console.error("Music play failed:", e);
                    alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —ç–∫—Ä–∞–Ω—É –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∑–≤—É–∫–∞");
                });
                musicBtn.innerText = 'üîä';
            }
            musicPlaying = !musicPlaying;
        }

        /**
         * –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
         */
        let state = {
            bal: 1000,
            lastDaily: 0,
            lastScratch: 0,
            unlocked: ['theme-default'],
            theme: 'theme-default',
            refClaimed: false,
            particles: true
        };

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage
        function save() { 
            localStorage.setItem('luckyspin_v3_final', JSON.stringify(state)); 
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ LocalStorage
        function load() {
            const d = localStorage.getItem('luckyspin_v3_final');
            if(d) state = JSON.parse(d);
            updateBalance(0);
            applyTheme(state.theme);
            if(state.particles === false) {
                document.getElementById('particle-canvas').style.opacity = '0';
                document.getElementById('fx-btn').innerText = 'üåë';
            }
        }

        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏–≥—Ä–æ–∫–∞
         * @param {number} amt - –°—É–º–º–∞ (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è)
         */
        function updateBalance(amt) {
            state.bal += amt;
            document.querySelectorAll('.bal-val-sync').forEach(el => el.innerText = Math.floor(state.bal));
            document.getElementById('balance-val').innerText = Math.floor(state.bal);
            
            const card = document.getElementById('bal-card');
            if(amt !== 0) {
                card.style.transform = 'scale(1.15) rotate(3deg)';
                setTimeout(()=>card.style.transform='scale(1)', 250);
            }
            if(amt > 0) {
                showToast(`+${amt} üí∞`);
                sfx.win();
                confettiBurst();
            }
            save();
        }

        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showToast(m) {
            const t = document.getElementById('toast');
            t.innerText = m; 
            t.style.bottom = '60px';
            setTimeout(()=>t.style.bottom='-120px', 3000);
        }

        /**
         * –°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—Ü –Ω–∞ —Ñ–æ–Ω–µ (Canvas Particle System)
         */
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let parts = [];
        
        function resize() { 
            canvas.width = window.innerWidth; 
            canvas.height = window.innerHeight; 
        }
        window.onresize = resize; 
        resize();

        class Particle {
            constructor() { 
                this.init(); 
            }
            init() {
                this.x = Math.random()*canvas.width;
                this.y = Math.random()*canvas.height;
                this.s = Math.random()*2 + 1;
                this.v = Math.random()*0.5 + 0.1;
                this.color = Math.random() > 0.5 ? 
                    getComputedStyle(document.body).getPropertyValue('--p').trim() : 
                    getComputedStyle(document.body).getPropertyValue('--c').trim();
            }
            update() {
                this.y -= this.v;
                if(this.y < -10) this.y = canvas.height + 10;
            }
            draw() {
                ctx.globalAlpha = 0.25;
                ctx.fillStyle = this.color;
                ctx.beginPath(); 
                ctx.arc(this.x, this.y, this.s, 0, 7); 
                ctx.fill();
            }
        }
        
        for(let i=0; i<80; i++) parts.push(new Particle());

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
        function toggleParticles() {
            state.particles = !state.particles;
            canvas.style.opacity = state.particles ? '1' : '0';
            document.getElementById('fx-btn').innerText = state.particles ? '‚ú®' : 'üåë';
            save();
        }

        // –≠—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ
        function confettiBurst() {
            for(let i=0; i<60; i++) {
                parts.push({
                    x: canvas.width/2, 
                    y: canvas.height/3,
                    s: Math.random()*10+3, 
                    vx: (Math.random()-0.5)*25, 
                    vy: (Math.random()-0.5)*25,
                    life: 1, 
                    c: `hsl(${Math.random()*360}, 100%, 60%)`,
                    conf: true,
                    update() { 
                        this.x += this.vx; 
                        this.y += this.vy; 
                        this.vy += 0.5; 
                        this.life -= 0.012; 
                    },
                    draw() {
                        ctx.globalAlpha = this.life;
                        ctx.fillStyle = this.c;
                        ctx.fillRect(this.x, this.y, this.s, this.s);
                    }
                });
            }
        }

        // –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –∞–Ω–∏–º–∞—Ü–∏–∏
        function animate() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            if(state.particles || parts.some(p => p.conf)) {
                parts.forEach((p, i) => {
                    p.update(); 
                    p.draw();
                    if(p.conf && p.life <= 0) parts.splice(i, 1);
                });
            }
            requestAnimationFrame(animate);
        }
        animate();

        /**
         * –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–º–∏ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
         */
        function openGame(g) {
            initAudio();
            sfx.click();
            const modal = document.getElementById('modal');
            const ui = document.getElementById('modal-ui');
            modal.style.display = 'flex';
            ui.innerHTML = `
                <div class="modal-balance-display">
                    üí∞ –í–ê–® –ë–ê–õ–ê–ù–°: <span class="bal-val-sync">${state.bal}</span>
                </div>
                <div id="game-content"></div>
            `;
            const content = document.getElementById('game-content');
            
            // –†–æ—É—Ç–∏–Ω–≥ –∏–≥—Ä
            if(g === 'slots') initSlots(content);
            if(g === 'blackjack') initBJ(content);
            if(g === 'roulette') initRoulette(content);
            if(g === 'dice') initDice(content);
            if(g === 'scratch') initScratch(content);
            if(g === 'shop') initShop(content);
        }

        function closeModal() { 
            document.getElementById('modal').style.display = 'none'; 
            sfx.click(); 
            bjActive = false;
        }

        /**
         * –°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–µ–æ—Ä–µ–∫–ª–∞–º—ã
         */
        function startVideoAd() {
            const wrapper = document.getElementById('ad-wrapper');
            const video = document.getElementById('ad-video');
            const timer = document.getElementById('ad-timer');
            
            wrapper.style.display = 'flex';
            video.currentTime = 0;
            video.play().catch(() => {
                alert("–û—à–∏–±–∫–∞: –†–µ–∫–ª–∞–º–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∏–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.");
                wrapper.style.display = 'none';
            });

            const updateAd = setInterval(() => {
                const rem = Math.ceil(video.duration - video.currentTime);
                timer.innerText = `–û–°–¢–ê–õ–û–°–¨: ${rem || 0} –°–ï–ö.`;
            }, 500);

            video.onended = () => {
                clearInterval(updateAd);
                wrapper.style.display = 'none';
                updateBalance(250);
                showToast("–ë–û–ù–£–° +250 üí∞");
            };
        }

        /* 
           ================================================================
           –ò–ì–†–û–í–û–ô –ú–û–î–£–õ–¨: ULTRA SLOTS
           ================================================================
        */
        const SLOTS_ITEMS = ['üíé', 'üçã', 'üçí', 'üîî', 'üçá', '7Ô∏è‚É£'];
        
        function initSlots(target) {
            target.innerHTML = `
                <h2 style="margin-bottom:20px;">ULTRA SLOTS</h2>
                <div class="slot-frame">
                    <div class="slot-box" id="s1">7Ô∏è‚É£</div>
                    <div class="slot-box" id="s2">7Ô∏è‚É£</div>
                    <div class="slot-box" id="s3">7Ô∏è‚É£</div>
                </div>
                <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50" min="10"></div>
                <button class="btn-glam" id="spin-btn" onclick="playSlots()">–í–†–ê–©–ê–¢–¨</button>
            `;
        }
        
        function playSlots() {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return showToast("–ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –ú–û–ù–ï–¢!");
            
            updateBalance(-bet);
            const btn = document.getElementById('spin-btn');
            btn.disabled = true;
            let count = 0;
            
            const iv = setInterval(() => {
                sfx.spin();
                document.getElementById('s1').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                document.getElementById('s2').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                document.getElementById('s3').innerText = SLOTS_ITEMS[Math.floor(Math.random()*6)];
                
                if(++count > 25) {
                    clearInterval(iv);
                    const r = [
                        document.getElementById('s1').innerText, 
                        document.getElementById('s2').innerText, 
                        document.getElementById('s3').innerText
                    ];
                    
                    // –õ–æ–≥–∏–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
                    if(r[0]===r[1] && r[1]===r[2]) {
                        if(r[0]==='7Ô∏è‚É£') updateBalance(bet*50);
                        else updateBalance(bet*15);
                    } else if(r[0]===r[1] || r[1]===r[2] || r[0]===r[2]) {
                        updateBalance(bet*2);
                    } else { 
                        sfx.lose(); 
                        showToast("–ü–û–ü–†–û–ë–£–ô–¢–ï –°–ù–û–í–ê"); 
                    }
                    btn.disabled = false;
                }
            }, 80);
        }

        /* 
           ================================================================
           –ò–ì–†–û–í–û–ô –ú–û–î–£–õ–¨: PRO BLACKJACK
           ================================================================
        */
        let deck, pHand, dHand, bjBet, bjActive = false;

        function initBJ(target) {
            target.innerHTML = `
                <h2>PRO BLACKJACK</h2>
                <div style="margin: 30px 0;">
                    <p style="opacity: 0.5; margin-bottom:10px;">–î–ò–õ–ï–†: <span id="ds" style="color:var(--p); font-weight:900;">0</span></p>
                    <div id="d-cards" class="card-area"></div>
                    <hr style="border:0; border-top:1px solid var(--border); margin:20px 0;">
                    <p style="opacity: 0.5; margin-bottom:10px;">–í–´: <span id="ps" style="color:var(--c); font-weight:900;">0</span></p>
                    <div id="p-cards" class="card-area"></div>
                </div>
                <div id="bj-controls">
                    <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="100" min="20"></div><br>
                    <button class="btn-glam" onclick="startBJ()">–†–ê–ó–î–ê–¢–¨ –ö–ê–†–¢–´</button>
                </div>
            `;
        }

        function startBJ() {
            bjBet = parseInt(document.getElementById('bet-val').value);
            if(bjBet > state.bal || bjBet <= 0) return showToast("–°–¢–ê–í–ö–ê –ù–ï –ü–†–ò–ù–Ø–¢–ê");
            
            updateBalance(-bjBet);
            bjActive = true;
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã
            deck = []; 
            const suits = ['‚ô†','‚ô£','‚ô•','‚ô¶'], values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            for(let s of suits) for(let v of values) deck.push({v, s});
            deck.sort(() => Math.random()-0.5);

            pHand = [deck.pop(), deck.pop()]; 
            dHand = [deck.pop()];
            
            renderBJ();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ë–ª—ç–∫–¥–∂–µ–∫
            if(getBJScore(pHand) === 21) {
                finalizeBJ('blackjack');
                return;
            }

            document.getElementById('bj-controls').innerHTML = `
                <button class="btn-glam" id="bj-hit-btn" onclick="bjMove('hit')">–ï–©–ï</button>
                <button class="btn-glam" id="bj-stand-btn" style="background:#333; margin-left:15px;" onclick="bjMove('stand')">–•–í–ê–¢–ò–¢</button>
            `;
        }

        function renderBJ() {
            const p = document.getElementById('p-cards'), d = document.getElementById('d-cards');
            p.innerHTML = ''; d.innerHTML = '';
            pHand.forEach(c => p.innerHTML += `<div class="p-card"><span>${c.v}</span><small>${c.s}</small></div>`);
            dHand.forEach(c => d.innerHTML += `<div class="p-card"><span>${c.v}</span><small>${c.s}</small></div>`);
            document.getElementById('ps').innerText = getBJScore(pHand);
            document.getElementById('ds').innerText = getBJScore(dHand);
            sfx.card();
        }

        function getBJScore(h) {
            let s = 0, aces = 0;
            h.forEach(c => {
                if(['J','Q','K'].includes(c.v)) s += 10;
                else if(c.v === 'A') { s += 11; aces++; }
                else s += parseInt(c.v);
            });
            while(s > 21 && aces > 0) { s -= 10; aces--; }
            return s;
        }

        function bjMove(move) {
            if(!bjActive) return;

            if(move === 'hit') {
                pHand.push(deck.pop());
                renderBJ();
                if(getBJScore(pHand) > 21) {
                    bjActive = false;
                    finalizeBJ('lose');
                }
            } else {
                bjActive = false;
                while(getBJScore(dHand) < 17) dHand.push(deck.pop());
                renderBJ();
                const ps = getBJScore(pHand), ds = getBJScore(dHand);
                if(ds > 21 || ps > ds) finalizeBJ('win');
                else if(ps === ds) finalizeBJ('draw');
                else finalizeBJ('lose');
            }
        }

        function finalizeBJ(res) {
            const ctrl = document.getElementById('bj-controls');
            if(ctrl) ctrl.innerHTML = `<p style="font-size:24px; font-weight:900; color:var(--g);">–û–ñ–ò–î–ê–ù–ò–ï...</p>`;
            
            setTimeout(() => {
                if(res === 'blackjack') {
                    updateBalance(bjBet * 2.5);
                    showToast("BLACKJACK! x2.5");
                } else if(res === 'win') {
                    updateBalance(bjBet * 2);
                    showToast("–ü–û–ë–ï–î–ê!");
                } else if(res === 'draw') {
                    updateBalance(bjBet);
                    showToast("–ù–ò–ß–¨–Ø (–í–û–ó–í–†–ê–¢)");
                } else {
                    sfx.lose();
                    showToast("–î–ò–õ–ï–† –ü–û–ë–ï–î–ò–õ");
                }
                setTimeout(() => { 
                    if(document.getElementById('modal').style.display === 'flex') openGame('blackjack'); 
                }, 1500);
            }, 600);
        }

        /* 
           ================================================================
           –ò–ì–†–û–í–û–ô –ú–û–î–£–õ–¨: GRAND ROULETTE
           ================================================================
        */
        function initRoulette(target) {
            target.innerHTML = `
                <h2>GRAND ROULETTE</h2>
                <div id="roulette-result" style="background: #111;">?</div>
                <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50" min="10"></div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                    <button class="btn-glam" style="background:#e11d48" onclick="playRou('red')">–ö–†–ê–°–ù–û–ï x2</button>
                    <button class="btn-glam" style="background:#111; border:1px solid #444;" onclick="playRou('black')">–ß–ï–†–ù–û–ï x2</button>
                    <button class="btn-glam" style="background:#10b981; grid-column: span 2;" onclick="playRou('zero')">–ó–ï–†–û x35</button>
                </div>
            `;
        }
        
        function playRou(pick) {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return showToast("–ú–ê–õ–û –°–†–ï–î–°–¢–í");
            
            updateBalance(-bet);
            let count = 0;
            const resBox = document.getElementById('roulette-result');
            
            const iv = setInterval(() => {
                sfx.spin();
                resBox.innerText = Math.floor(Math.random()*37);
                if(++count > 30) {
                    clearInterval(iv);
                    const num = Math.floor(Math.random()*37);
                    const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(num);
                    const color = num === 0 ? 'zero' : (isRed ? 'red' : 'black');
                    
                    resBox.innerText = num;
                    resBox.style.background = color === 'zero' ? '#10b981' : (color === 'red' ? '#e11d48' : '#111');
                    
                    if(pick === color) updateBalance(color === 'zero' ? bet*35 : bet*2);
                    else { sfx.lose(); showToast("–ù–ï –ü–û–í–ï–ó–õ–û"); }
                }
            }, 60);
        }

        /* 
           ================================================================
           –ò–ì–†–û–í–û–ô –ú–û–î–£–õ–¨: ORBITAL DICE
           ================================================================
        */
        function initDice(target) {
            target.innerHTML = `
                <h2>ORBITAL DICE</h2>
                <div id="dice-res" style="font-size: 90px; margin: 40px;">üé≤ üé≤</div>
                <div class="bet-input-area">–°–¢–ê–í–ö–ê: <input type="number" id="bet-val" value="50"></div>
                <div style="display:flex; gap:15px; justify-content:center;">
                    <button class="btn-glam" onclick="playDice('even')">–ß–ï–¢ x2</button>
                    <button class="btn-glam" onclick="playDice('odd')">–ù–ï–ß–ï–¢ x2</button>
                </div>
            `;
        }
        
        function playDice(pick) {
            const bet = parseInt(document.getElementById('bet-val').value);
            if(bet > state.bal || bet <= 0) return;
            
            updateBalance(-bet);
            const d1 = Math.floor(Math.random()*6)+1, d2 = Math.floor(Math.random()*6)+1;
            const sum = d1 + d2;
            const icons = ['‚öÄ','‚öÅ','‚öÇ','‚öÉ','‚öÑ','‚öÖ'];
            
            document.getElementById('dice-res').innerText = `${icons[d1-1]} ${icons[d2-1]}`;
            const isEven = sum % 2 === 0;
            
            if((pick === 'even' && isEven) || (pick === 'odd' && !isEven)) updateBalance(bet*2);
            else { sfx.lose(); showToast("–ü–†–û–ò–ì–†–´–®"); }
        }

        /* 
           ================================================================
           –ò–ì–†–û–í–û–ô –ú–û–î–£–õ–¨: SCRATCH LUCK (–õ–û–¢–ï–†–ï–Ø)
           ================================================================
        */
        let scratchClaimed = false;
        
        function initScratch(target) {
            const now = Date.now();
            if(now - state.lastScratch < 3600000) {
                const diff = 3600000 - (now - state.lastScratch);
                const mins = Math.ceil(diff/60000);
                target.innerHTML = `
                    <h2>SCRATCH LUCK</h2>
                    <div style="margin:40px 0; padding:30px; background:rgba(255,0,0,0.1); border-radius:20px; border:1px solid #ff4444;">
                        –õ–û–¢–ï–†–ï–Ø –ë–£–î–ï–¢ –î–û–°–¢–£–ü–ù–ê –ß–ï–†–ï–ó:<br>
                        <span style="font-size:32px; font-weight:900; color:#ff4444;">${mins} –ú–ò–ù.</span>
                    </div>
                    <button class="btn-glam" onclick="closeModal()">–ü–û–ù–Ø–¢–ù–û</button>
                `;
                return;
            }
            target.innerHTML = `
                <h2>SCRATCH LUCK</h2>
                <p style="margin-bottom:20px; opacity:0.6;">–°–æ—Ç—Ä–∏ 80% —Å–ª–æ—è, —á—Ç–æ–±—ã –∑–∞–±—Ä–∞—Ç—å –ø—Ä–∏–∑!</p>
                <div style="position:relative; width:300px; height:150px; margin:20px auto;">
                    <canvas id="scratch-canvas" width="300" height="150" style="position:absolute; top:0; left:0; z-index:2; cursor:crosshair;"></canvas>
                    <div style="position:absolute; top:0; left:0; width:300px; height:150px; background:#111; color:#ffcc00; display:flex; align-items:center; justify-content:center; font-size:36px; font-weight:bold; border-radius:20px; z-index:1; border:2px solid var(--g);">üí∞ 1000</div>
                </div>
            `;
            const canv = document.getElementById('scratch-canvas'), c = canv.getContext('2d');
            c.fillStyle = '#777'; 
            c.beginPath(); 
            c.roundRect(0,0,300,150,20); 
            c.fill();
            
            const handleScratch = (e) => {
                const r = canv.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - r.left;
                const y = (e.clientY || e.touches[0].clientY) - r.top;
                c.globalCompositeOperation = 'destination-out';
                c.beginPath(); 
                c.arc(x, y, 25, 0, 7); 
                c.fill();
                
                const data = c.getImageData(0,0,300,150).data;
                let cleared = 0;
                for(let i=3; i<data.length; i+=4) if(data[i] === 0) cleared++;
                
                if(cleared > 35000 && !scratchClaimed) {
                    scratchClaimed = true;
                    state.lastScratch = Date.now(); 
                    updateBalance(1000);
                    showToast("–ú–û–ú–ï–ù–¢–ê–õ–¨–ù–´–ô –í–´–ò–ì–†–´–®!");
                    setTimeout(() => { scratchClaimed = false; closeModal(); }, 1500);
                }
            };
            canv.ontouchmove = (e) => { handleScratch(e); e.preventDefault(); };
            canv.onmousemove = (e) => { if(e.buttons === 1) handleScratch(e); };
        }

        /* 
           ================================================================
           –ú–ê–ì–ê–ó–ò–ù –¢–ï–ú (THE VAULT)
           ================================================================
        */
        function initShop(target) {
            const themes = [
                {id: 'theme-default', name: 'NEON BLUE (FREE)', price: 0},
                {id: 'theme-emerald', name: 'EMERALD LUXURY', price: 5000},
                {id: 'theme-ruby', name: 'RUBY DARKNESS', price: 15000},
                {id: 'theme-gold', name: 'PURE GOLD EDITION', price: 50000}
            ];
            target.innerHTML = `<h2>THE VAULT</h2><p style="margin-bottom:30px; opacity:0.5;">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</p>`;
            themes.forEach(t => {
                const owned = state.unlocked.includes(t.id);
                target.innerHTML += `
                    <div style="display:flex; justify-content:space-between; align-items:center; padding:25px; background:var(--surface); border-radius:25px; margin-bottom:15px; border: 1px solid var(--border);">
                        <span style="font-weight:700; letter-spacing:1px;">${t.name}</span>
                        <button class="btn-glam" style="padding:12px 25px; font-size:12px;" onclick="buyTheme('${t.id}', ${t.price})">
                            ${owned ? (state.theme === t.id ? '–ê–ö–¢–ò–í–ù–û' : '–í–´–ë–†–ê–¢–¨') : t.price + ' üí∞'}
                        </button>
                    </div>
                `;
            });
        }
        
        function buyTheme(id, p) {
            if(state.unlocked.includes(id)) { 
                state.theme = id; 
                applyTheme(id); 
                openGame('shop'); 
            } else if(state.bal >= p) { 
                updateBalance(-p); 
                state.unlocked.push(id); 
                state.theme = id; 
                applyTheme(id); 
                openGame('shop'); 
            } else {
                showToast("–ù–£–ñ–ù–û –ë–û–õ–¨–®–ï –ó–û–õ–û–¢–ê");
            }
        }
        
        function applyTheme(id) { 
            document.body.className = id; 
            save(); 
        }

        /* 
           ================================================================
           –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –ò –¢–ê–ô–ú–ï–†–´
           ================================================================
        */
        function spinDaily() {
            const now = Date.now();
            if(now - state.lastDaily < 86400000) return showToast("–ü–†–ò–•–û–î–ò–¢–ï –ó–ê–í–¢–†–ê");
            
            const wheel = document.getElementById('main-wheel');
            const deg = 1800 + Math.random()*1800;
            wheel.style.transform = `rotate(${deg}deg)`;
            document.getElementById('daily-btn').disabled = true;
            
            state.lastDaily = now;
            save();
            
            setTimeout(()=> { 
                updateBalance(500); 
                updateTimer(); 
                showToast("–ï–ñ–ï–î–ù–ï–í–ù–´–ô –ë–û–ù–£–° –ü–û–õ–£–ß–ï–ù!");
            }, 5000);
        }

        function updateTimer() {
            const left = 86400000 - (Date.now() - state.lastDaily);
            const timerEl = document.getElementById('timer');
            if(left > 0 && timerEl) {
                const h = Math.floor(left/3600000);
                const m = Math.floor((left%3600000)/60000);
                timerEl.innerText = `–°–õ–ï–î–£–Æ–©–ò–ô –ë–û–ù–£–° –ß–ï–†–ï–ó: ${h}–ß. ${m}–ú.`;
                document.getElementById('daily-btn').disabled = true;
            } else if(timerEl) {
                timerEl.innerText = "–ë–û–ù–£–° –ì–û–¢–û–í!";
                document.getElementById('daily-btn').disabled = false;
            }
        }

        function claimReferral() {
            if(state.refClaimed) return alert("–í—ã —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ –±–æ–Ω—É—Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è!");
            const code = document.getElementById('friend-code').value.trim();
            if(code.length > 4) {
                state.refClaimed = true; 
                updateBalance(500); 
                save();
                alert("–ö–æ–¥ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +500 –º–æ–Ω–µ—Ç –Ω–∞ —Å—á–µ—Ç.");
            } else {
                alert("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞.");
            }
        }

        function scrollToGrid() { 
            document.getElementById('game-grid').scrollIntoView({behavior:'smooth'}); 
            sfx.click();
        }

        function hardReset() { 
            if(confirm("–í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ –≤–∞—à–∏ –º–æ–Ω–µ—Ç—ã –∏ –∫—É–ø–ª–µ–Ω–Ω—ã–µ —Ç–µ–º—ã. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?")) { 
                localStorage.clear(); 
                location.reload(); 
            } 
        }

        /**
         * –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ–∫–Ω–∞
         */
        window.onload = () => {
            load();
            setInterval(updateTimer, 30000);
            updateTimer();
            console.log("LuckySpin Engine V3.5 Loaded Successfully");
        };

        // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
        document.body.addEventListener('click', () => {
            initAudio();
        }, {once: true});
        
    </script>
</body>
</html>
