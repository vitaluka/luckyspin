<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LuckySpin Grand Luxury | The Definitive Edition V3.1</title>
    
    <!-- 
       LUCKY SPIN CASINO SIMULATOR 
       VERSION: 3.1.0 (Definitive Edition)
       AUTHOR: Vitaluka & AI Refinement
       LICENSE: MIT
    -->

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700;900&family=Playfair+Display:wght@700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* 
           ================================================================
           1. –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –¶–í–ï–¢–û–í–´–ï –°–•–ï–ú–´
           ================================================================
        */
        :root {
            --p: #ff00ff; /* Neon Pink */
            --c: #00f2ff; /* Neon Cyan */
            --g: #ffcc00; /* Gold */
            --b: #050508; /* Deep Background */
            --surface: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --grad: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --shadow: 0 0 25px rgba(255, 0, 255, 0.2);
            --glass: rgba(255, 255, 255, 0.03);
            --text-main: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.6);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Å–µ—Ç—ã (Emerald, Ruby, Gold) */
        body.theme-emerald { --p: #10b981; --c: #34d399; --grad: linear-gradient(135deg, #064e3b, #065f46); --shadow: 0 0 25px rgba(16, 185, 129, 0.2); }
        body.theme-ruby { --p: #e11d48; --c: #fb7185; --grad: linear-gradient(135deg, #4c0519, #881337); --shadow: 0 0 25px rgba(225, 29, 72, 0.2); }
        body.theme-gold { --p: #ffcc00; --c: #ffffff; --grad: linear-gradient(135deg, #434343, #000000); --shadow: 0 0 25px rgba(255, 204, 0, 0.2); }

        /* 
           ================================================================
           2. –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –ò –û–ë–ù–£–õ–ï–ù–ò–ï
           ================================================================
        */
        * { 
            box-sizing: border-box; 
            margin: 0; padding: 0; 
            font-family: 'Montserrat', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            -webkit-user-select: none;
            user-select: none;
        }
        
        body {
            background: var(--b);
            background-image: var(--grad);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            background-attachment: fixed;
            overscroll-behavior-y: contain;
            line-height: 1.6;
        }

        /* –•–æ–ª—Å—Ç –¥–ª—è —á–∞—Å—Ç–∏—Ü (–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è GPU) */
        canvas#particle-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none;
            will-change: transform;
        }

        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 0 30px; 
        }

        /* 
           ================================================================
           3. –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ù–ê–í–ò–ì–ê–¶–ò–ò (HEADER)
           ================================================================
        */
        header {
            background: rgba(5, 5, 8, 0.85);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            padding: 15px 5%;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--p);
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: 32px; font-weight: 900; letter-spacing: 3px;
            background: linear-gradient(to right, #fff, var(--g), #fff);
            background-size: 200% auto;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shine 5s linear infinite;
        }

        @keyframes shine { to { background-position: 200% center; } }

        .balance-pill {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--g);
            padding: 10px 28px;
            border-radius: 50px;
            display: flex; align-items: center; gap: 12px;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.15);
            transition: var(--transition);
        }
        
        #balance-val { 
            font-weight: 900; 
            color: var(--g); 
            font-size: 26px; 
            font-family: 'JetBrains Mono', monospace;
        }

        /* 
           ================================================================
           4. –ü–õ–ê–í–ê–Æ–©–ò–ï –ö–û–ù–¢–†–û–õ–õ–ï–†–´ (UI)
           ================================================================
        */
        .floating-controls {
            position: fixed; bottom: 30px; right: 30px;
            display: flex; flex-direction: column; gap: 15px;
            z-index: 1001;
        }

        .ui-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border);
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; backdrop-filter: blur(15px);
            color: white; font-size: 24px;
            transition: var(--transition);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .ui-btn:hover { background: var(--p); transform: scale(1.1) rotate(5deg); }
        .ui-btn.active { border-color: var(--c); color: var(--c); }

        /* 
           ================================================================
           5. HERO SECTION –ò –ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´
           ================================================================
        */
        .hero {
            display: grid; grid-template-columns: 1.1fr 0.9fr;
            gap: 60px; padding: 100px 0; align-items: center;
        }

        .hero-info h1 {
            font-size: 72px; font-weight: 900; line-height: 1;
            margin-bottom: 30px; text-transform: uppercase;
            font-family: 'Playfair Display', serif;
        }
        .hero-info h1 span { color: var(--p); text-shadow: 0 0 30px var(--p); }

        .daily-section {
            background: var(--surface); border: 2px solid var(--border);
            padding: 60px; border-radius: 60px; text-align: center;
            backdrop-filter: blur(20px); position: relative;
            box-shadow: var(--shadow);
        }

        .wheel-outer {
            width: 360px; height: 360px; margin: 0 auto 40px;
            border: 12px solid var(--g); border-radius: 50%;
            position: relative; overflow: hidden;
            background: conic-gradient(
                #1a1a1a 0deg 45deg, var(--p) 45deg 90deg, 
                #2a2a2a 90deg 135deg, var(--c) 135deg 180deg,
                #1a1a1a 180deg 225deg, var(--p) 225deg 270deg,
                #2a2a2a 270deg 315deg, var(--c) 315deg 360deg
            );
            transition: transform 6s cubic-bezier(0.15, 0, 0.15, 1);
            box-shadow: 0 0 60px rgba(0,0,0,0.7);
        }

        .wheel-pointer {
            position: absolute; top: -15px; left: 50%;
            transform: translateX(-50%); z-index: 20;
            width: 0; height: 0; 
            border-left: 25px solid transparent;
            border-right: 25px solid transparent; 
            border-top: 45px solid var(--g);
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5));
        }

        /* 
           ================================================================
           6. –ö–ù–û–ü–ö–ò –ò UI –≠–õ–ï–ú–ï–ù–¢–´
           ================================================================
        */
        .btn-glam {
            background: linear-gradient(45deg, var(--p), var(--c));
            color: white; border: none; padding: 22px 55px;
            border-radius: 100px; font-weight: 900; font-size: 18px;
            cursor: pointer; text-transform: uppercase; letter-spacing: 3px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            transition: var(--transition);
            position: relative; overflow: hidden;
            display: inline-block;
        }

        .btn-glam:hover:not(:disabled) { 
            transform: translateY(-7px) scale(1.03); 
            box-shadow: 0 20px 40px var(--shadow); 
        }

        .btn-glam:active { transform: translateY(-2px); }

        .btn-glam:disabled { 
            background: #222; color: #555; 
            cursor: not-allowed; transform: scale(0.98); 
            box-shadow: none;
        }

        /* 
           ================================================================
           7. –ò–ì–†–û–í–ê–Ø –°–ï–¢–ö–ê (GAME SELECTION)
           ================================================================
        */
        .grid-header {
            margin: 80px 0 40px; text-align: left;
        }
        .grid-title {
            font-size: 42px; font-weight: 900;
            display: flex; align-items: center; gap: 25px;
            text-transform: uppercase; letter-spacing: 5px;
        }
        .grid-title::after { content: ''; height: 3px; flex: 1; background: linear-gradient(to right, var(--p), transparent); }

        .games-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px; margin-bottom: 120px;
        }

        .game-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            border-radius: 50px; padding: 60px 40px;
            text-align: center; transition: var(--transition);
            cursor: pointer; position: relative; overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .game-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
            transform: translateX(-100%); transition: 0.6s;
        }

        .game-card:hover::before { transform: translateX(100%); }

        .game-card:hover { 
            transform: translateY(-20px); 
            border-color: var(--p); 
            background: rgba(255,255,255,0.07);
            box-shadow: var(--shadow);
        }

        .game-card svg {
            width: 100px; height: 100px; margin-bottom: 35px;
            stroke: var(--c); fill: none; stroke-width: 1.2;
            filter: drop-shadow(0 0 20px var(--c));
            transition: var(--transition);
        }

        .game-card:hover svg { transform: scale(1.1) rotate(5deg); }

        .game-card h3 { font-size: 30px; font-weight: 900; margin-bottom: 20px; color: #fff; }
        .game-card p { color: var(--text-dim); font-size: 16px; line-height: 1.7; }

        /* 
           ================================================================
           8. –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –ò –ò–ì–†–û–í–´–ï –ò–ù–¢–ï–†–§–ï–ô–°–´
           ================================================================
        */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.96); z-index: 2000;
            backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            justify-content: center; align-items: center; padding: 20px;
        }

        .modal-content {
            background: #0a0a0c; width: 100%; max-width: 850px;
            padding: 80px 60px; border-radius: 60px;
            border: 2px solid var(--p); position: relative;
            text-align: center; box-shadow: 0 0 150px rgba(0,0,0,1);
            max-height: 90vh; overflow-y: auto;
            scrollbar-width: thin; scrollbar-color: var(--p) transparent;
        }

        .close-modal { 
            position: absolute; top: 35px; right: 45px; 
            font-size: 50px; cursor: pointer; color: var(--text-dim);
            transition: var(--transition);
        }
        .close-modal:hover { color: var(--p); transform: rotate(90deg); }

        .modal-balance-display {
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid var(--g);
            display: inline-flex; align-items: center; gap: 15px;
            padding: 12px 30px; border-radius: 100px;
            color: var(--g); font-weight: 900; margin-bottom: 40px;
            font-family: 'JetBrains Mono', monospace; font-size: 20px;
        }

        /* –ò–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .bet-input-area {
            margin: 30px 0; background: rgba(255,255,255,0.03);
            padding: 25px; border-radius: 30px; border: 1px solid var(--border);
        }
        .bet-input-area input {
            background: #000; border: 2px solid var(--g); color: var(--g);
            font-size: 32px; font-weight: 900; width: 180px; text-align: center;
            padding: 15px; border-radius: 20px; outline: none;
            font-family: 'JetBrains Mono', monospace;
        }

        .slot-frame {
            display: flex; gap: 25px; justify-content: center; margin: 50px 0;
            background: #000; padding: 40px; border-radius: 40px;
            border: 3px solid rgba(255,255,255,0.05);
        }
        .slot-box {
            width: 140px; height: 180px; background: linear-gradient(to bottom, #111, #050505);
            border-radius: 25px; display: flex; align-items: center; justify-content: center;
            font-size: 85px; border: 1px solid var(--border);
            text-shadow: 0 0 30px rgba(255,255,255,0.3);
            transition: transform 0.1s;
        }

        /* 
           ================================================================
           9. –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô –ò –í–ò–î–ï–û
           ================================================================
        */
        #toast {
            position: fixed; bottom: -120px; left: 50%; transform: translateX(-50%);
            background: #fff; color: #000; padding: 25px 80px;
            border-radius: 100px; font-weight: 900; font-size: 24px;
            z-index: 9999; transition: 0.6s cubic-bezier(0.68, -0.6, 0.3, 1.6);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        #ad-wrapper {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 5000; flex-direction: column; 
            align-items: center; justify-content: center;
        }
        #ad-video { width: 90%; max-width: 900px; border-radius: 30px; box-shadow: 0 0 100px var(--p); }

        /* 
           ================================================================
           10. –ú–ï–î–ò–ê-–ó–ê–ü–†–û–°–´ (–ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨)
           ================================================================
        */
        @media (max-width: 1024px) {
            .hero { grid-template-columns: 1fr; text-align: center; padding: 50px 0; }
            .hero-info h1 { font-size: 56px; }
            .wheel-outer { width: 300px; height: 300px; }
        }

        @media (max-width: 600px) {
            header { padding: 10px 15px; }
            .brand { font-size: 22px; }
            #balance-val { font-size: 20px; }
            .hero-info h1 { font-size: 38px; }
            .daily-section { padding: 30px 20px; border-radius: 40px; }
            .modal-content { padding: 50px 20px; border-radius: 40px; }
            .game-card { padding: 40px 20px; }
            .slot-box { width: 80px; height: 110px; font-size: 45px; }
            .floating-controls { bottom: 20px; right: 20px; }
        }

        /* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .rules-text { font-size: 14px; color: var(--text-dim); margin-top: 20px; font-style: italic; }
        .win-anim { animation: winScale 0.5s ease infinite alternate; }
        @keyframes winScale { from { transform: scale(1); } to { transform: scale(1.05); } }

    </style>
</head>
<body class="theme-default">

    <!-- –§–û–ù–û–í–´–ï –ß–ê–°–¢–ò–¶–´ -->
    <canvas id="particle-canvas"></canvas>

    <!-- –®–ê–ü–ö–ê -->
    <header>
        <div class="brand">LUCKY SPIN</div>
        <div class="balance-pill" id="bal-card">
            <span style="font-size: 24px;">üí∞</span>
            <span id="balance-val">1000</span>
        </div>
    </header>

    <!-- –ü–õ–ê–í–ê–Æ–©–ò–ï –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
    <div class="floating-controls">
        <div class="ui-btn" onclick="toggleParticles()" id="part-btn" title="–í–∫–ª/–í—ã–∫–ª —á–∞—Å—Ç–∏—Ü—ã">‚ú®</div>
        <div class="ui-btn" onclick="toggleMusic()" id="music-btn" title="–í–∫–ª/–í—ã–∫–ª –º—É–∑—ã–∫—É">üîá</div>
    </div>

    <!-- –ê–£–î–ò–û -->
    <audio id="bg-music" loop preload="auto">
        <source src="bg_music.mp3" type="audio/mpeg">
    </audio>

    <main class="container">
        <!-- –ì–ï–†–û–ô-–°–ï–ö–¶–ò–Ø -->
        <section class="hero">
            <div class="hero-info">
                <h1>FORTUNE<br><span>FAVORS</span><br>THE BOLD</h1>
                <p style="font-size: 20px; color: var(--text-dim); margin-bottom: 50px; max-width: 600px;">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —ç–ª–∏—Ç–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä –∞–∑–∞—Ä—Ç–∞. –ú—ã –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏ –ª—É—á—à–∏–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∫–∞–∑–∏–Ω–æ –≤ –æ–¥–Ω–æ–º –∑–∞—â–∏—â–µ–Ω–Ω–æ–º PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
                </p>
                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                    <button class="btn-glam" onclick="scrollToGrid()">–ò–ì–†–û–í–û–ô –ó–ê–õ</button>
                    <button class="btn-glam" style="background: var(--surface); border: 1px solid var(--border);" onclick="startVideoAd()">–†–ï–ö–õ–ê–ú–ê (+250 üí∞)</button>
                </div>

                <div style="margin-top: 50px; padding: 30px; background: rgba(255,255,255,0.02); border-radius: 30px; border: 1px dashed var(--border);">
                    <p style="font-size: 14px; letter-spacing: 1px; opacity: 0.8;">–í–ê–® –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô ID: <span id="user-id-display" style="color:var(--c); font-weight: 900;">LS-772-XP</span></p>
                    <div style="margin-top: 15px; display: flex; gap: 10px;">
                        <input type="text" id="promo-input" placeholder="–ü–†–û–ú–û–ö–û–î" style="background: #000; border: 1px solid var(--border); color: #fff; padding: 10px 20px; border-radius: 10px; outline: none; flex: 1;">
                        <button class="btn-glam" style="padding: 10px 20px; font-size: 12px;" onclick="applyPromo()">–í–í–û–î</button>
                    </div>
                </div>
            </div>
            
            <div class="daily-section">
                <div class="wheel-pointer"></div>
                <div class="wheel-outer" id="main-wheel"></div>
                <button class="btn-glam" id="daily-btn" onclick="spinDaily()">–ö–†–£–¢–ò–¢–¨ –ë–ï–°–ü–õ–ê–¢–ù–û</button>
                <p id="timer" style="margin-top: 25px; font-weight: 700; color: var(--text-dim); font-family: 'JetBrains Mono';"></p>
                <p class="rules-text">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å –¥–æ—Å—Ç—É–ø–µ–Ω —Ä–∞–∑ –≤ 24 —á–∞—Å–∞. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: 5000 üí∞</p>
            </div>
        </section>

        <!-- –ò–ì–†–û–í–û–ô –ó–ê–õ -->
        <div class="grid-header" id="game-grid">
            <div class="grid-title">GAMING HALL</div>
        </div>

        <div class="games-grid">
            <!-- SLOTS -->
            <div class="game-card" onclick="openGame('slots')">
                <svg viewBox="0 0 24 24"><path d="M19 5H5a2 2 0 00-2 2v10a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2zM7 5v14M12 5v14M17 5v14M2 12h20"></path></svg>
                <h3>ULTRA SLOTS</h3>
                <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π "–û–¥–Ω–æ—Ä—É–∫–∏–π –±–∞–Ω–¥–∏—Ç" —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —à–∞–Ω—Å–æ–º –Ω–∞ —Ç—Ä–∏ —Å–µ–º–µ—Ä–∫–∏.</p>
            </div>

            <!-- BLACKJACK -->
            <div class="game-card" onclick="openGame('blackjack')">
                <svg viewBox="0 0 24 24"><rect x="3" y="5" width="12" height="16" rx="2" transform="rotate(-10 3 5)" /><rect x="8" y="3" width="12" height="16" rx="2" /><path d="M12 10l2 2-2 2"></path></svg>
                <h3>PRO BLACKJACK</h3>
                <p>–ò—Å–ø—ã—Ç–∞–π —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –≤ –±–∏—Ç–≤–µ –ø—Ä–æ—Ç–∏–≤ –¥–∏–ª–µ—Ä–∞. –ü—Ä–∞–≤–∏–ª–∞ –õ–∞—Å-–í–µ–≥–∞—Å–∞ (S17).</p>
            </div>

            <!-- ROULETTE -->
            <div class="game-card" onclick="openGame('roulette')">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M12 2v20M2 12h20"></path><circle cx="12" cy="12" r="3"></circle></svg>
                <h3>ROYAL ROULETTE</h3>
                <p>–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è —Ä—É–ª–µ—Ç–∫–∞. –°—Ç–∞–≤—å –Ω–∞ –ª—é–±–∏–º–æ–µ —á–∏—Å–ª–æ –∏–ª–∏ —Ü–≤–µ—Ç –∏ —É–º–Ω–æ–∂–∞–π –±–∞–Ω–∫.</p>
            </div>

            <!-- DICE -->
            <div class="game-card" onclick="openGame('dice')">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8" cy="8" r="1.5" fill="currentColor"></circle><circle cx="16" cy="16" r="1.5" fill="currentColor"></circle></svg>
                <h3>NEON DICE</h3>
                <p>–ü—Ä–æ—Å—Ç–∞—è –∏ —á–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞ –Ω–∞ –∫–æ—Å—Ç—è—Ö. –£–≥–∞–¥–∞–π —Å—É–º–º—É –∏–ª–∏ —á–µ—Ç–Ω–æ—Å—Ç—å –±—Ä–æ—Å–∫–∞.</p>
            </div>

            <!-- SCRATCH -->
            <div class="game-card" onclick="openGame('scratch')">
                <svg viewBox="0 0 24 24"><path d="M20 7h-9m9 4h-9m9 4h-9M4 7h4v10H4z"></path></svg>
                <h3>LUCKY SCRATCH</h3>
                <p>–°—Ç–∏—Ä–∞–π –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –∏ –Ω–∞—Ö–æ–¥–∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å.</p>
            </div>

            <!-- VAULT (SHOP) -->
            <div class="game-card" onclick="openGame('shop')">
                <svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4H6z"></path><path d="M3 6h18M16 10a4 4 0 01-8 0"></path></svg>
                <h3>THE VAULT</h3>
                <p>–ú–∞–≥–∞–∑–∏–Ω —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö —Ç–µ–º, —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.</p>
            </div>
        </div>

        <footer style="padding: 100px 0; border-top: 1px solid var(--border); text-align: center; opacity: 0.5;">
            <p>&copy; 2025 LUCKY SPIN CASINO SIMULATOR. DEFINITIVE EDITION V3.1</p>
            <p style="margin-top: 15px; font-size: 12px;">–î–∞–Ω–Ω–∞—è –∏–≥—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.</p>
            <div style="margin-top: 40px;">
                <span style="color: #ff4444; cursor: pointer; text-decoration: underline;" onclick="hardReset()">–°–ë–†–û–°–ò–¢–¨ –í–ï–°–¨ –ü–†–û–ì–†–ï–°–°</span>
            </div>
        </footer>
    </main>

    <!-- –ú–û–î–ê–õ–ö–ò -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-ui"></div>
        </div>
    </div>

    <!-- –†–ï–ö–õ–ê–ú–ù–´–ô –û–í–ï–†–õ–ï–ô -->
    <div id="ad-wrapper">
        <h2 style="margin-bottom: 30px; letter-spacing: 5px;">COMMERCIAL BREAK</h2>
        <video id="ad-video" src="ad_video.mp4" playsinline></video>
        <div id="ad-timer" style="margin-top: 30px; font-size: 32px; color: var(--g); font-weight: 900;">00:15</div>
        <p style="margin-top: 10px; opacity: 0.5;">–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
    </div>

    <!-- –¢–û–°–¢–ï–† –£–í–ï–î–û–ú–õ–ï–ù–ò–ô -->
    <div id="toast">–í–´–ò–ì–†–´–®!</div>

    <!-- 
       ================================================================
       SCRIPTS (LOGIC ENGINE)
       ================================================================
    -->
    <script>
        /**
         * INITIALIZATION AND GLOBAL STATE
         */
        const aCtx = new (window.AudioContext || window.webkitAudioContext)();
        let state = {
            bal: 1000,
            lastDaily: 0,
            lastScratch: 0,
            unlocked: ['theme-default'],
            theme: 'theme-default',
            particles: true,
            isMusicPlaying: false
        };

        const bgMusic = document.getElementById('bg-music');
        const particlesCanvas = document.getElementById('particle-canvas');
        
        /**
         * AUDIO ENGINE
         */
        function playSfx(f, type, d, v = 0.1) {
            try {
                if (aCtx.state === 'suspended') aCtx.resume();
                const o = aCtx.createOscillator();
                const g = aCtx.createGain();
                o.type = type; o.frequency.value = f;
                g.gain.setValueAtTime(v, aCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.0001, aCtx.currentTime + d);
                o.connect(g); g.connect(aCtx.destination);
                o.start(); o.stop(aCtx.currentTime + d);
            } catch(e) { console.warn("Audio Context blocked"); }
        }

        const sfx = {
            click: () => playSfx(600, 'sine', 0.1),
            win: () => { 
                playSfx(523, 'square', 0.2); 
                setTimeout(()=>playSfx(659,'square',0.2), 100); 
                setTimeout(()=>playSfx(783,'square',0.4), 200); 
            },
            lose: () => playSfx(150, 'triangle', 0.5, 0.2),
            spin: () => playSfx(Math.random()*200+400, 'sine', 0.05, 0.05),
            card: () => playSfx(400, 'triangle', 0.1)
        };

        function toggleMusic() {
            const btn = document.getElementById('music-btn');
            if (state.isMusicPlaying) {
                bgMusic.pause();
                btn.innerText = 'üîá';
                btn.classList.remove('active');
            } else {
                bgMusic.play().catch(e => console.log("Press any key to enable audio"));
                btn.innerText = 'üîä';
                btn.classList.add('active');
            }
            state.isMusicPlaying = !state.isMusicPlaying;
            save();
        }

        /**
         * PARTICLE ENGINE
         */
        let parts = [];
        const ctx = particlesCanvas.getContext('2d');
        let animationFrame;

        function toggleParticles() {
            state.particles = !state.particles;
            const btn = document.getElementById('part-btn');
            btn.classList.toggle('active', state.particles);
            if (!state.particles) {
                ctx.clearRect(0,0,particlesCanvas.width, particlesCanvas.height);
            }
            save();
        }

        class Particle {
            constructor() { this.init(); }
            init() {
                this.x = Math.random() * particlesCanvas.width;
                this.y = Math.random() * particlesCanvas.height;
                this.s = Math.random() * 2 + 1;
                this.v = Math.random() * 0.5 + 0.2;
                this.c = Math.random() > 0.5 ? '#ff00ff' : '#00f2ff';
            }
            update() {
                this.y -= this.v;
                if(this.y < -10) this.y = particlesCanvas.height + 10;
            }
            draw() {
                ctx.globalAlpha = 0.2;
                ctx.fillStyle = this.c;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, 7); ctx.fill();
            }
        }

        function initParticles() {
            particlesCanvas.width = window.innerWidth;
            particlesCanvas.height = window.innerHeight;
            parts = Array.from({length: 80}, () => new Particle());
            
            function loop() {
                if (state.particles) {
                    ctx.clearRect(0, 0, particlesCanvas.width, particlesCanvas.height);
                    parts.forEach(p => { p.update(); p.draw(); });
                }
                requestAnimationFrame(loop);
            }
            loop();
        }

        /**
         * CORE LOGIC: BALANCE & SAVE
         */
        function save() { localStorage.setItem('luckyspin_v31_data', JSON.stringify(state)); }
        function load() {
            const d = localStorage.getItem('luckyspin_v31_data');
            if(d) state = JSON.parse(d);
            updateBalance(0, false);
            applyTheme(state.theme);
            document.getElementById('part-btn').classList.toggle('active', state.particles);
        }

        function updateBalance(amt, notify = true) {
            state.bal += amt;
            document.querySelectorAll('.bal-val-sync').forEach(el => el.innerText = Math.floor(state.bal));
            document.getElementById('balance-val').innerText = Math.floor(state.bal);
            
            if(notify && amt !== 0) {
                const toast = document.getElementById('toast');
                toast.innerText = amt > 0 ? `+${amt} üí∞` : `${amt} üí∞`;
                toast.style.bottom = '50px';
                setTimeout(()=> toast.style.bottom = '-120px', 2500);
                if(amt > 0) sfx.win();
            }
            save();
        }

        /**
         * MODAL & GAMES SYSTEM
         */
        function openGame(game) {
            sfx.click();
            const modal = document.getElementById('modal');
            const ui = document.getElementById('modal-ui');
            modal.style.display = 'flex';
            ui.innerHTML = `
                <div class="modal-balance-display">
                    üí∞ BALANCE: <span class="bal-val-sync">${state.bal}</span>
                </div>
                <div id="game-container"></div>
            `;
            const container = document.getElementById('game-container');

            switch(game) {
                case 'slots': initSlots(container); break;
                case 'blackjack': initBJ(container); break;
                case 'roulette': initRoulette(container); break;
                case 'dice': initDice(container); break;
                case 'scratch': initScratch(container); break;
                case 'shop': initShop(container); break;
            }
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            sfx.click();
        }

        /**
         * GAME: ULTRA SLOTS
         */
        function initSlots(target) {
            const symbols = ['üíé', '7Ô∏è‚É£', 'üçí', 'üçã', 'üîî', 'üçá'];
            target.innerHTML = `
                <h2 style="font-size: 40px; margin-bottom: 20px;">ULTRA SLOTS</h2>
                <div class="slot-frame">
                    <div class="slot-box" id="s1">üíé</div>
                    <div class="slot-box" id="s2">üíé</div>
                    <div class="slot-box" id="s3">üíé</div>
                </div>
                <div class="bet-input-area">
                    <p style="margin-bottom: 10px; opacity: 0.6;">–í–ê–®–ê –°–¢–ê–í–ö–ê</p>
                    <input type="number" id="slot-bet" value="100" min="10">
                </div>
                <button class="btn-glam" id="slot-spin-btn" onclick="playSlots()">–ò–ì–†–ê–¢–¨</button>
                <p class="rules-text">3 –≤ —Ä—è–¥ = x10 | 2 –≤ —Ä—è–¥ = x2</p>
            `;
        }

        function playSlots() {
            const bet = parseInt(document.getElementById('slot-bet').value);
            if(bet > state.bal || bet <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
            
            updateBalance(-bet);
            const btn = document.getElementById('slot-spin-btn');
            btn.disabled = true;
            
            let count = 0;
            const symbols = ['üíé', '7Ô∏è‚É£', 'üçí', 'üçã', 'üîî', 'üçá'];
            const iv = setInterval(() => {
                sfx.spin();
                document.getElementById('s1').innerText = symbols[Math.floor(Math.random()*symbols.length)];
                document.getElementById('s2').innerText = symbols[Math.floor(Math.random()*symbols.length)];
                document.getElementById('s3').innerText = symbols[Math.floor(Math.random()*symbols.length)];
                if(++count > 20) {
                    clearInterval(iv);
                    const r = [document.getElementById('s1').innerText, document.getElementById('s2').innerText, document.getElementById('s3').innerText];
                    if(r[0] === r[1] && r[1] === r[2]) {
                        updateBalance(bet * 10);
                        document.querySelector('.slot-frame').classList.add('win-anim');
                    } else if(r[0] === r[1] || r[1] === r[2] || r[0] === r[2]) {
                        updateBalance(bet * 2);
                    } else {
                        sfx.lose();
                    }
                    btn.disabled = false;
                }
            }, 80);
        }

        /**
         * GAME: BLACKJACK
         */
        let bjDeck, bjPHand, bjDHand, bjBet, bjGameOver;

        function initBJ(target) {
            target.innerHTML = `
                <h2 style="font-size: 32px;">BLACKJACK PRO</h2>
                <div style="margin: 30px 0;">
                    <p style="opacity: 0.5;">–î–ò–õ–ï–†: <span id="ds">0</span></p>
                    <div id="d-cards" style="display:flex; justify-content:center; gap:10px; min-height:120px; margin-bottom:20px;"></div>
                    <p style="opacity: 0.5;">–ò–ì–†–û–ö: <span id="ps">0</span></p>
                    <div id="p-cards" style="display:flex; justify-content:center; gap:10px; min-height:120px;"></div>
                </div>
                <div id="bj-ctrls">
                    <div class="bet-input-area"><input type="number" id="bj-bet-val" value="100"></div>
                    <button class="btn-glam" onclick="startBJ()">–†–ê–ó–î–ê–¢–¨</button>
                </div>
            `;
        }

        function startBJ() {
            bjBet = parseInt(document.getElementById('bj-bet-val').value);
            if(bjBet > state.bal || bjBet <= 0) return;
            updateBalance(-bjBet);
            bjGameOver = false;

            const suits = ['‚ô†','‚ô£','‚ô•','‚ô¶'], values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            bjDeck = [];
            for(let s of suits) for(let v of values) bjDeck.push({v, s});
            bjDeck.sort(() => Math.random() - 0.5);

            bjPHand = [bjDeck.pop(), bjDeck.pop()];
            bjDHand = [bjDeck.pop()];
            renderBJ();

            if (getBJScore(bjPHand) === 21) {
                bjGameOver = true;
                setTimeout(() => finalizeBJ('blackjack'), 500);
            } else {
                document.getElementById('bj-ctrls').innerHTML = `
                    <button class="btn-glam" onclick="bjAction('hit')">–ï–©–Å</button>
                    <button class="btn-glam" style="background:#444" onclick="bjAction('stand')">–•–í–ê–¢–ò–¢</button>
                `;
            }
        }

        function renderBJ() {
            const p = document.getElementById('p-cards'), d = document.getElementById('d-cards');
            p.innerHTML = ''; d.innerHTML = '';
            bjPHand.forEach(c => p.innerHTML += `<div style="width:70px; height:100px; background:#fff; color:#000; border-radius:10px; display:flex; flex-direction:column; justify-content:center; font-weight:900; font-size:20px;">${c.v}<span>${c.s}</span></div>`);
            bjDHand.forEach(c => d.innerHTML += `<div style="width:70px; height:100px; background:#fff; color:#000; border-radius:10px; display:flex; flex-direction:column; justify-content:center; font-weight:900; font-size:20px;">${c.v}<span>${c.s}</span></div>`);
            document.getElementById('ps').innerText = getBJScore(bjPHand);
            document.getElementById('ds').innerText = getBJScore(bjDHand);
            sfx.card();
        }

        function getBJScore(h) {
            let s = 0, a = 0;
            h.forEach(c => {
                if(['J','Q','K'].includes(c.v)) s += 10;
                else if(c.v === 'A') { s += 11; a++; }
                else s += parseInt(c.v);
            });
            while(s > 21 && a > 0) { s -= 10; a--; }
            return s;
        }

        function bjAction(act) {
            if(bjGameOver) return;
            if(act === 'hit') {
                bjPHand.push(bjDeck.pop());
                renderBJ();
                if(getBJScore(bjPHand) > 21) finalizeBJ('lose');
            } else {
                while(getBJScore(bjDHand) < 17) bjDHand.push(bjDeck.pop());
                renderBJ();
                const ps = getBJScore(bjPHand), ds = getBJScore(bjDHand);
                if(ds > 21 || ps > ds) finalizeBJ('win');
                else if(ps === ds) finalizeBJ('draw');
                else finalizeBJ('lose');
            }
        }

        function finalizeBJ(res) {
            bjGameOver = true;
            if(res === 'win') updateBalance(bjBet * 2);
            else if(res === 'blackjack') updateBalance(bjBet * 2.5);
            else if(res === 'draw') updateBalance(bjBet);
            else sfx.lose();
            
            setTimeout(() => openGame('blackjack'), 2000);
        }

        /**
         * DAILY WHEEL LOGIC
         */
        function spinDaily() {
            const now = Date.now();
            if(now - state.lastDaily < 86400000) return alert("–ë–æ–Ω—É—Å –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤!");
            
            const wheel = document.getElementById('main-wheel');
            const deg = 1800 + Math.random() * 1800;
            wheel.style.transform = `rotate(${deg}deg)`;
            
            document.getElementById('daily-btn').disabled = true;
            state.lastDaily = now;
            
            setTimeout(() => {
                updateBalance(500);
                updateTimer();
            }, 6000);
        }

        function updateTimer() {
            const left = 86400000 - (Date.now() - state.lastDaily);
            const el = document.getElementById('timer');
            if(left > 0) {
                const h = Math.floor(left/3600000), m = Math.floor((left%3600000)/60000);
                el.innerText = `NEXT: ${h}H ${m}M`;
                document.getElementById('daily-btn').disabled = true;
            } else {
                el.innerText = "READY TO SPIN!";
                document.getElementById('daily-btn').disabled = false;
            }
        }

        /**
         * AD SYSTEM
         */
        function startVideoAd() {
            const wrap = document.getElementById('ad-wrapper');
            const vid = document.getElementById('ad-video');
            const tim = document.getElementById('ad-timer');
            wrap.style.display = 'flex';
            vid.play();
            
            const iv = setInterval(() => {
                const rem = Math.ceil(vid.duration - vid.currentTime);
                tim.innerText = `00:${rem < 10 ? '0'+rem : rem}`;
            }, 1000);

            vid.onended = () => {
                clearInterval(iv);
                wrap.style.display = 'none';
                updateBalance(250);
            };
        }

        /**
         * SHOP & THEMES
         */
        function initShop(target) {
            const themes = [
                {id: 'theme-default', n: 'NEON NIGHT', p: 0},
                {id: 'theme-emerald', n: 'EMERALD CITY', p: 5000},
                {id: 'theme-ruby', n: 'RUBY DANGER', p: 10000},
                {id: 'theme-gold', n: 'ELITE GOLD', p: 25000}
            ];
            target.innerHTML = `<h2 style="margin-bottom:30px;">THE VAULT</h2>`;
            themes.forEach(t => {
                const isOwned = state.unlocked.includes(t.id);
                target.innerHTML += `
                    <div style="display:flex; justify-content:space-between; align-items:center; padding:20px; background:rgba(255,255,255,0.05); border-radius:20px; margin-bottom:10px;">
                        <span>${t.n}</span>
                        <button class="btn-glam" style="padding:10px 20px; font-size:12px;" onclick="buyTheme('${t.id}', ${t.p})">
                            ${isOwned ? (state.theme === t.id ? 'ACTIVE' : 'SELECT') : t.p + ' üí∞'}
                        </button>
                    </div>
                `;
            });
        }

        function buyTheme(id, price) {
            if(state.unlocked.includes(id)) {
                state.theme = id;
                applyTheme(id);
                openGame('shop');
            } else if(state.bal >= price) {
                updateBalance(-price);
                state.unlocked.push(id);
                state.theme = id;
                applyTheme(id);
                openGame('shop');
            }
        }

        function applyTheme(id) {
            document.body.className = id;
            save();
        }

        /**
         * UTILS
         */
        function scrollToGrid() { document.getElementById('game-grid').scrollIntoView({behavior:'smooth'}); }
        function hardReset() { if(confirm("–≠–¢–û –£–î–ê–õ–ò–¢ –í–ï–°–¨ –í–ê–® –ü–†–û–ì–†–ï–°–°! –í–´ –£–í–ï–†–ï–ù–´?")) { localStorage.clear(); location.reload(); } }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –º—É–∑—ã–∫–∏ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å–æ –≤–∫–ª–∞–¥–∫–∏
        document.addEventListener("visibilitychange", () => {
            if (document.hidden) bgMusic.pause();
            else if (state.isMusicPlaying) bgMusic.play();
        });

        window.onload = () => {
            load();
            initParticles();
            setInterval(updateTimer, 60000);
            updateTimer();
            console.log("LuckySpin Engine V3.1 Started Successfully");
        };
    </script>
</body>
</html>
